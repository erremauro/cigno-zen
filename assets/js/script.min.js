(function(E){function l(h){var v=E.getElementById("search-bar");v.style.display==="none"||v.style.display===""?v.style.display="block":v.style.display="none",E.querySelectorAll(".menu-label").forEach(w=>w.classList.toggle("hidden"));var b=E.getElementById("menu-button");b.classList.toggle("rotated")}E.addEventListener("DOMContentLoaded",function(){var h=E.getElementById("site-menu-toggle");h.addEventListener("click",l)})})(document),(function(){function E(n,t){return(t||document).querySelector(n)}function l(n,t){return Array.prototype.slice.call((t||document).querySelectorAll(n))}function h(n){var t=n.getAttribute("data-toggle-target")||"#"+(n.getAttribute("aria-controls")||"").trim();if(!t)return null;try{return document.querySelector(t)}catch{return null}}function v(n){var t=(n.getAttribute("data-scroll-target")||"").trim();if(!t)return null;try{return document.querySelector(t)}catch{return null}}function b(n,t){var a=n.querySelector(".more-link-button"),i=n.querySelector(".more-link-lable-top"),o=n.querySelector(".more-link-lable-bottom");n.setAttribute("aria-expanded",String(t)),a&&a.classList.toggle("rotated",t),i&&i.classList.toggle("hidden",t),o&&o.classList.toggle("hidden",!t);var m=h(n);m&&(t?m.removeAttribute("hidden"):m.setAttribute("hidden",""))}function w(n){if(!(!n||!("scrollIntoView"in n)))try{n.scrollIntoView({behavior:"smooth",block:"start"})}catch{n.scrollIntoView(!0)}}function u(n){n&&n.preventDefault();var t=n.currentTarget,a=t.getAttribute("aria-expanded")!=="true";b(t,a);var i=t.getAttribute("data-toggle-target")||"#"+(t.getAttribute("aria-controls")||"").trim();if(i&&l(".js-toggle").forEach(function(y){if(y!==t){var _=y.getAttribute("data-toggle-target")||"#"+(y.getAttribute("aria-controls")||"").trim();_===i&&b(y,a)}}),!a){var o=v(t);if(!o&&i){var m=l(".js-toggle").find(function(y){if(y===t)return!1;var _=y.getAttribute("data-toggle-target")||"#"+(y.getAttribute("aria-controls")||"").trim();return _===i&&y.hasAttribute("data-scroll-target")});m&&(o=v(m))}o&&w(o)}}function e(n){(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),u(n))}document.addEventListener("DOMContentLoaded",function(){l(".js-toggle").forEach(function(n){var t=n.getAttribute("aria-expanded")==="true";b(n,t),n.addEventListener("click",u),n.addEventListener("keydown",e)})})})(),(()=>{const E=(s,r=document)=>Array.from(r.querySelectorAll(s)),l=(s,r=document)=>r.querySelector(s),h=s=>window.CSS&&CSS.escape?CSS.escape(s):(s||"").replace(/[^a-zA-Z0-9_\-]/g,"\\$&"),v=s=>{try{const r=s&&s.includes("#")?s.split("#").pop():"";return decodeURIComponent((r||"").trim())}catch{return""}},w=(s,r)=>{const d=p=>{if(!p||p.nodeType!==1)return!1;const c=(p.textContent||"").trim();if(!/^\[?\(?\d+\)?[\.\:\]]?$/.test(c))return!1;if(p.tagName==="A"){const C=(p.getAttribute("href")||"").trim(),k=p.className||"";if(C.includes("#")){const M=C.split("#").pop();if(M==="fnref"+r.replace(/^fn/,"")||/fnref|ref|note/i.test(M)||/fnref|ref|note/i.test(k))return!0}return!1}return["SUP","SPAN","EM","STRONG","B","I"].includes(p.tagName)};let f=3;for(;s.firstChild&&f-- >0;){if(d(s.firstChild)){s.removeChild(s.firstChild);continue}break}},u=s=>{E("a",s).forEach(r=>{const d=r.getAttribute("href")||"",f=r.className||"",p=r.getAttribute("role")||"",c=(r.getAttribute("aria-label")||r.getAttribute("title")||"").toLowerCase(),A=(r.textContent||"").replace(/[\uFE0E\uFE0F]/g,"").trim(),C=d.includes("#"),k=C?d.split("#").pop():"",M=/(^|\s)fnref(\s|$)/i.test(f)||/^fnref/i.test(k),H=/backlink|backref|return|footnote[-_]?return/i.test(f)||p.toLowerCase()==="doc-backlink"||c.includes("back")||c.includes("ritorna")||c.includes("torna")||/↩|↪|↑|⬆/.test(A);(C&&(M||H)||H)&&r.remove()})},e=s=>{if(!s)return"";let r=document.querySelector(`p.footnote#${h(s)}`);if(!r){const A=document.getElementById(s);A&&(r=A.matches("p.footnote")?A:A.querySelector("p.footnote, p"))}if(!r)return"";const d=r.cloneNode(!0);u(d);const f=d.innerHTML.trim(),p=r.cloneNode(!0);return w(p,s),u(p),((p.textContent||"").trim()?p.innerHTML.trim():f)||f},n=(s,r)=>{const d=p=>{const c=String(p||"").trim().match(/^\s*[\[\(]?(\d+)[\]\)\.:]?\s*$/);return c?c[1]:""};let f=d(s.textContent||s.innerText||"");if(!f&&s.closest("sup")&&(f=d(s.closest("sup").textContent||"")),!f){const p=(r||"").match(/(\d+)(?!.*\d)/);f=p?p[1]:s.textContent||r||""}return f};let t={anchor:null,popup:null,overlay:null};const a=()=>{var s,r,d,f;(s=t.popup)==null||s.remove(),(r=t.overlay)==null||r.remove(),(f=(d=t.anchor)==null?void 0:d.focus)==null||f.call(d,{preventScroll:!0}),t={anchor:null,popup:null,overlay:null},document.removeEventListener("keydown",i),window.removeEventListener("resize",o),window.removeEventListener("scroll",o,!0)},i=s=>{s.key==="Escape"&&a()},o=()=>{t.popup&&t.anchor&&T(t.popup,t.anchor)},m=(s,r)=>{const d=document.createElement("div");d.className="footnote-overlay",d.addEventListener("click",a,{passive:!0});const f=document.createElement("div");f.className="footnote-popup",f.setAttribute("role","dialog"),f.setAttribute("aria-modal","true");const p=`footnote-popup-title-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,7)}`;f.setAttribute("aria-labelledby",p);const c=document.createElement("button");c.className="footnote-popup-close",c.type="button",c.setAttribute("aria-label","Chiudi nota"),c.textContent="\xD7",c.addEventListener("click",a);const A=document.createElement("div");A.className="footnote-popup-title",A.id=p,A.textContent=`${r}`;const C=document.createElement("div");C.className="footnote-popup-content";const k=y(s,256);let M=null;return k.length>1?(C.classList.add("footnote-popup-content--paged"),C.style.overflow="hidden",C.style.maxHeight="none",k.forEach((H,B)=>{B!==0&&(H.hidden=!0),C.appendChild(H)}),M=_(k)):C.innerHTML=s,f.appendChild(c),f.appendChild(A),f.appendChild(C),M&&f.appendChild(M),{popup:f,overlay:d}},y=(s,r)=>{const d=document.createElement("div");d.innerHTML=s||"";const f=Array.from(d.childNodes),p=[];let c=document.createElement("div");c.className="footnote-page";let A=r;const C=S=>(S.textContent||"").length,k=(S,D)=>{if(D<=0)return[null,S];const R=S.nodeValue||"";if(R.length<=D)return[S,null];let N=-1;for(let q=D;q>0;q-=1)if(/\s/.test(R.charAt(q-1))){N=q;break}if(N<=0){if(/\s/.test(R)&&D<r)return[null,S];N=D}const I=document.createTextNode(R.slice(0,N)),P=R.slice(N).replace(/^\s+/,""),U=P?document.createTextNode(P):null;return[I,U]},M=(S,D)=>{if(D<=0)return[null,S];if(S.nodeType===3)return k(S,D);if(S.nodeType!==1)return[S,null];const R=S.cloneNode(!1),N=S.cloneNode(!1);let I=D;const P=Array.from(S.childNodes);for(let U=0;U<P.length;U+=1){const q=P[U],X=C(q);if(X<=I){R.appendChild(q),I-=X;continue}if(I>0){const[$,j]=M(q,I);$&&R.appendChild($),j&&N.appendChild(j)}else N.appendChild(q);for(let $=U+1;$<P.length;$+=1)N.appendChild(P[$]);break}return[R.childNodes.length?R:null,N.childNodes.length?N:null]},H=()=>{c.childNodes.length&&p.push(c),c=document.createElement("div"),c.className="footnote-page",A=r};let B=0;for(;B<f.length;){let S=f[B];const D=C(S);if(D<=A||D===0){c.appendChild(S),A-=D,B+=1;continue}const[R,N]=M(S,A);if(R&&c.appendChild(R),H(),N)S=N;else{B+=1;continue}for(;S;){const I=C(S);if(I<=A||I===0){c.appendChild(S),A-=I,S=null,B+=1;break}const[P,U]=M(S,A);P&&c.appendChild(P),H(),S=U}}return c.childNodes.length&&p.push(c),p.length?p:[c]},_=s=>{let r=0;const d=document.createElement("div");d.className="footnote-pagination";const f=document.createElement("button");f.type="button",f.className="footnote-pagination-prev",f.setAttribute("aria-label","Pagina precedente"),f.textContent="\u2190";const p=document.createElement("button");p.type="button",p.className="footnote-pagination-next",p.setAttribute("aria-label","Pagina successiva"),p.textContent="\u2192";const c=document.createElement("span");c.className="footnote-pagination-indicator";const A=()=>{s.forEach((C,k)=>{C.hidden=k!==r}),f.disabled=r===0,p.disabled=r===s.length-1,c.textContent=`${r+1}/${s.length}`};return f.addEventListener("click",()=>{r>0&&(r-=1,A())}),p.addEventListener("click",()=>{r<s.length-1&&(r+=1,A())}),d.appendChild(f),d.appendChild(c),d.appendChild(p),A(),d},g=680,T=(s,r)=>{s.style.minWidth="240px",s.style.visibility="hidden",s.style.left="0px",s.style.top="0px",document.body.appendChild(s);const d=r.getBoundingClientRect(),f=document.documentElement.clientWidth,p=document.documentElement.clientHeight,c=8,A=s.getBoundingClientRect();let C=window.scrollY+d.bottom+c;d.bottom+A.height+c>p&&(C=window.scrollY+d.top-A.height-c,C<window.scrollY+c&&(C=window.scrollY+c));let k=window.scrollX+d.left+(d.width-A.width)/2;k=Math.max(window.scrollX+c,Math.min(k,window.scrollX+f-A.width-c)),s.style.left=`${k}px`,s.style.top=`${C}px`,s.style.visibility="visible",f<=g&&(s.style.right=`${k}px`)},L=(s,r)=>{const d=e(r);if(!d)return;const f=n(s,r);a();const{popup:p,overlay:c}=m(d,f);document.body.appendChild(c),t={anchor:s,popup:p,overlay:c},T(p,s),document.addEventListener("keydown",i),window.addEventListener("resize",o),window.addEventListener("scroll",o,!0),(p.querySelector("button")||p).focus({preventScroll:!0})},O=()=>{document.addEventListener("click",s=>{if(s.metaKey||s.ctrlKey||s.shiftKey||s.button===1)return;const r=s.target.closest('sup.fn a[href], a.footnote-ref[href], sup a[href^="#fn"]');if(!r)return;const d=v(r.getAttribute("href")||"");!d||!(document.querySelector(`p.footnote#${h(d)}`)||document.getElementById(d))||(s.preventDefault(),L(r,d))})},x=()=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 24 24"),s.setAttribute("width","32"),s.setAttribute("height","32"),s.setAttribute("aria-hidden","true"),s.style.flex="0 0 auto",s.style.transition="transform .2s ease",s.classList.add("footnotes-chevron");const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d","M6.23 8.97a1 1 0 0 1 1.41 0L12 13.34l4.36-4.37a1 1 0 1 1 1.41 1.42l-5.06 5.06a1 1 0 0 1-1.41 0L6.23 10.4a1 1 0 0 1 0-1.42z"),r.setAttribute("fill","currentColor"),s.appendChild(r),s},F=s=>{if(!s||s.__czFootnotesReady)return;let r=s.querySelector(":scope > [id]");(!r||!/^H[2-6]$/.test(r.tagName))&&(r=s.querySelector(":scope > h2, :scope > h3, :scope > h4, :scope > h5, :scope > h6"));const d=s.querySelector(":scope > .footnotes-content");if(!r||!d)return;if(r.setAttribute("role","button"),r.setAttribute("tabindex","0"),r.setAttribute("aria-expanded","false"),!r.querySelector(".footnotes-chevron")){const c=x(),A=document.createElement("span");for(A.className="footnotes-toggle-text";r.firstChild;)A.appendChild(r.firstChild);r.appendChild(c),r.appendChild(A),r.style.display="inline-flex",r.style.alignItems="center",r.style.gap=".5rem",c.style.transform="rotate(-90deg)"}d.hidden=!0;const f=c=>{const A=r.querySelector(".footnotes-chevron");r.setAttribute("aria-expanded",c?"true":"false"),d.hidden=!c,A&&(A.style.transform=c?"rotate(0deg)":"rotate(-90deg)")},p=c=>{c.preventDefault(),f(d.hidden)};r.addEventListener("click",p),r.addEventListener("keydown",c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),p(c))}),s.__czFootnotesReady=!0},G=(s=document)=>{E("div.footnotes",s).forEach(F)},W=()=>{G(),O()};document.readyState!=="loading"?W():document.addEventListener("DOMContentLoaded",W);const z=new MutationObserver(s=>{for(const r of s)r.addedNodes&&r.addedNodes.forEach(d=>{!d||d.nodeType!==1||typeof d.querySelectorAll=="function"&&(d.matches&&d.matches("div.footnotes")?F(d):G(d))})});try{z.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}})(),(()=>{function E(){var l=document.querySelector(".nav-user");l&&(document.addEventListener("click",function(h){l.hasAttribute("open")&&(l.contains(h.target)||l.removeAttribute("open"))}),document.addEventListener("keydown",function(h){h.key==="Escape"&&l.hasAttribute("open")&&l.removeAttribute("open")}))}document.addEventListener("DOMContentLoaded",E)})(),(function(){var E="cz-theme",l="cz-theme-override",h=document.documentElement,v=document.getElementById("theme-toggle"),b=(h.getAttribute("data-user-theme")||"auto").toLowerCase();function w(g){h.setAttribute("data-theme",g),v&&v.setAttribute("aria-pressed",g==="dark")}function u(){var g=new Date;return g.setHours(23,59,59,999),g.getTime()}function e(){return Date.now()}function n(){try{var g=localStorage.getItem(l);if(!g)return null;var T=JSON.parse(g);return!T||(T.exp||0)<e()||T.theme!=="light"&&T.theme!=="dark"?(localStorage.removeItem(l),null):T.theme}catch{try{localStorage.removeItem(l)}catch{}return null}}function t(g){try{localStorage.setItem(l,JSON.stringify({theme:g,exp:u()}))}catch{}}function a(){try{localStorage.removeItem(E)}catch{}}function i(){var g=new Date().getHours();return g>=7&&g<18?"light":"dark"}function o(g){return g==="dark"||g==="light"}a();var m=o(b)?b:n()||i();if(w(m),o(b)){v&&(v.setAttribute("aria-disabled","true"),v.setAttribute("disabled","disabled"));return}if(v){var y=720,_;v.addEventListener("click",function(){if(!v.classList.contains("animating")){var g=h.getAttribute("data-theme")||i(),T=g==="dark"?"light":"dark",L=T==="dark"?"anim-to-dark":"anim-to-light";v.classList.add("animating",L),requestAnimationFrame(function(){w(T),t(T),clearTimeout(_),_=setTimeout(function(){v.classList.remove("animating","anim-to-dark","anim-to-light")},y)})}}),document.addEventListener("visibilitychange",function(){if(document.visibilityState==="visible"){var g=n();g||w(i())}})}})(),(function(){function E(i){return i&&typeof i.querySelectorAll=="function"?i:document}function l(i,o){return E(o).querySelector(i)}function h(i,o){return Array.from(E(o).querySelectorAll(i))}const v=i=>i&&(i.tagName==="BUTTON"||i.getAttribute("role")==="button"),b=()=>{const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("viewBox","0 0 24 24"),i.setAttribute("width","48"),i.setAttribute("height","48"),i.setAttribute("aria-hidden","true"),i.style.flex="0 0 auto",i.style.transition="transform .2s ease",i.classList.add("collapsable-chevron");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d","M6.23 8.97a1 1 0 0 1 1.41 0L12 13.34l4.36-4.37a1 1 0 1 1 1.41 1.42l-5.06 5.06a1 1 0 0 1-1.41 0L6.23 10.4a1 1 0 0 1 0-1.42z"),o.setAttribute("fill","currentColor"),i.appendChild(o),i},w=(i,o)=>{const m=l(".collapsable-toggle",i),y=l(".collapsable-content",i);if(!m||!y)return;const _=l(".collapsable-chevron",m),g=i.classList.contains("is-open");o!==g&&(i.classList.toggle("is-open",o),m.setAttribute("aria-expanded",o?"true":"false"),y.setAttribute("aria-hidden",o?"false":"true"),y.style.display=o?"":"none",_&&(_.style.transform=o?"rotate(0deg)":"rotate(-90deg)"))},u=i=>{v(i)||(i.setAttribute("role","button"),i.setAttribute("tabindex","0")),i.style.cursor="pointer"},e=(i,o="collapsable-content-")=>(i.id||(i.id=o+Math.random().toString(36).slice(2,9)),i.id),n=i=>{if(!i||i.__collapsableReady)return;const o=l(".collapsable-toggle",i),m=l(".collapsable-content",i);if(!o||!m)return;if(!l(".collapsable-chevron",o)){const g=b(),T=document.createElement("span");for(T.className="collapsable-toggle-text";o.firstChild;)T.appendChild(o.firstChild);o.appendChild(T),o.insertBefore(g,T),o.style.display="inline-flex",o.style.alignItems="center",o.style.gap=".5rem"}u(o),e(m),o.setAttribute("aria-controls",m.id);const y=(i.getAttribute("data-initial")||"").toLowerCase();w(i,y!=="closed");const _=g=>{g.preventDefault(),w(i,!i.classList.contains("is-open"))};o.addEventListener("click",_),o.addEventListener("keydown",g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),_(g))}),i.__collapsableReady=!0},t=i=>{h(".collapsable-section",i).forEach(n)};document.readyState!=="loading"?t():document.addEventListener("DOMContentLoaded",t);const a=new MutationObserver(i=>{for(const o of i)o.addedNodes&&o.addedNodes.forEach(m=>{!m||m.nodeType!==1||typeof m.querySelectorAll=="function"&&(m.matches&&m.matches(".collapsable-section")?n(m):t(m))})});try{a.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}})(),(function(){const E=document.getElementById("latest-articles");if(!E)return;function l(){const h=E.querySelector(".cz-carousel");if(!h)return;const v=h.querySelector(".cz-carousel-track"),b=Array.from(v.querySelectorAll(".article-card")),w=Array.from(h.querySelectorAll(".cz-carousel-dot")),u=window.matchMedia("(max-width: 587px)");let e=0;function n(){if(!u.matches){v.style.transform="none";return}v.style.transform="translateX("+-e*100+"%)"}function t(a){w.forEach((i,o)=>{i.classList.toggle("is-active",o===a),i.setAttribute("aria-selected",o===a?"true":"false")})}w.forEach(a=>{a.addEventListener("click",function(){e=Math.max(0,Math.min(b.length-1,parseInt(this.dataset.index||"0",10))),n(),t(e)})}),u.addEventListener("change",n),window.addEventListener("resize",n),n(),t(e)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l()})(),(function(){"use strict";function E(u,e){var n={};for(var t in u)Object.prototype.hasOwnProperty.call(u,t)&&e.indexOf(t)<0&&(n[t]=u[t]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(u);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(u,t[a])&&(n[t[a]]=u[t[a]]);return n}class l{constructor(e,n){this.ATT_FACTOR=4,this.GRAPH_X=2,this.AMPLITUDE_FACTOR=.6,this.ctrl=e,this.definition=n}globalAttFn(e){return Math.pow(this.ATT_FACTOR/(this.ATT_FACTOR+Math.pow(e,this.ATT_FACTOR)),this.ATT_FACTOR)}xPos(e){return this.ctrl.width*((e+this.GRAPH_X)/(this.GRAPH_X*2))}yPos(e){return this.AMPLITUDE_FACTOR*(this.globalAttFn(e)*(this.ctrl.heightMax*this.ctrl.amplitude)*(1/this.definition.attenuation)*Math.sin(this.ctrl.opt.frequency*e-this.ctrl.phase))}draw(){const{ctx:e}=this.ctrl;e.moveTo(0,0),e.beginPath();const t=(this.definition.color||this.ctrl.color).replace(/rgb\(/g,"").replace(/\)/g,"");e.strokeStyle=`rgba(${t},${this.definition.opacity})`,e.lineWidth=this.definition.lineWidth;for(let a=-this.GRAPH_X;a<=this.GRAPH_X;a+=this.ctrl.opt.pixelDepth)e.lineTo(this.xPos(a),this.ctrl.heightMax+this.yPos(a));e.stroke()}static getDefinition(){return[{attenuation:-2,lineWidth:1,opacity:.1},{attenuation:-6,lineWidth:1,opacity:.2},{attenuation:4,lineWidth:1,opacity:.4},{attenuation:2,lineWidth:1,opacity:.6},{attenuation:1,lineWidth:1.5,opacity:1}]}}class h{constructor(e,n){this.GRAPH_X=25,this.AMPLITUDE_FACTOR=.8,this.SPEED_FACTOR=1,this.DEAD_PX=2,this.ATT_FACTOR=4,this.DESPAWN_FACTOR=.02,this.DEFAULT_NOOFCURVES_RANGES=[2,5],this.DEFAULT_AMPLITUDE_RANGES=[.3,1],this.DEFAULT_OFFSET_RANGES=[-3,3],this.DEFAULT_WIDTH_RANGES=[1,3],this.DEFAULT_SPEED_RANGES=[.5,1],this.DEFAULT_DESPAWN_TIMEOUT_RANGES=[500,2e3],this.ctrl=e,this.definition=n,this.noOfCurves=0,this.spawnAt=0,this.prevMaxY=0,this.phases=[],this.offsets=[],this.speeds=[],this.finalAmplitudes=[],this.widths=[],this.amplitudes=[],this.despawnTimeouts=[],this.verses=[]}getRandomRange(e){return e[0]+Math.random()*(e[1]-e[0])}spawnSingle(e){var n,t,a,i,o,m,y,_,g,T;this.phases[e]=0,this.amplitudes[e]=0,this.despawnTimeouts[e]=this.getRandomRange((t=(n=this.ctrl.opt.ranges)===null||n===void 0?void 0:n.despawnTimeout)!==null&&t!==void 0?t:this.DEFAULT_DESPAWN_TIMEOUT_RANGES),this.offsets[e]=this.getRandomRange((i=(a=this.ctrl.opt.ranges)===null||a===void 0?void 0:a.offset)!==null&&i!==void 0?i:this.DEFAULT_OFFSET_RANGES),this.speeds[e]=this.getRandomRange((m=(o=this.ctrl.opt.ranges)===null||o===void 0?void 0:o.speed)!==null&&m!==void 0?m:this.DEFAULT_SPEED_RANGES),this.finalAmplitudes[e]=this.getRandomRange((_=(y=this.ctrl.opt.ranges)===null||y===void 0?void 0:y.amplitude)!==null&&_!==void 0?_:this.DEFAULT_AMPLITUDE_RANGES),this.widths[e]=this.getRandomRange((T=(g=this.ctrl.opt.ranges)===null||g===void 0?void 0:g.width)!==null&&T!==void 0?T:this.DEFAULT_WIDTH_RANGES),this.verses[e]=this.getRandomRange([-1,1])}getEmptyArray(e){return new Array(e)}spawn(){var e,n;this.spawnAt=Date.now(),this.noOfCurves=Math.floor(this.getRandomRange((n=(e=this.ctrl.opt.ranges)===null||e===void 0?void 0:e.noOfCurves)!==null&&n!==void 0?n:this.DEFAULT_NOOFCURVES_RANGES)),this.phases=this.getEmptyArray(this.noOfCurves),this.offsets=this.getEmptyArray(this.noOfCurves),this.speeds=this.getEmptyArray(this.noOfCurves),this.finalAmplitudes=this.getEmptyArray(this.noOfCurves),this.widths=this.getEmptyArray(this.noOfCurves),this.amplitudes=this.getEmptyArray(this.noOfCurves),this.despawnTimeouts=this.getEmptyArray(this.noOfCurves),this.verses=this.getEmptyArray(this.noOfCurves);for(let t=0;t<this.noOfCurves;t++)this.spawnSingle(t)}globalAttFn(e){return Math.pow(this.ATT_FACTOR/(this.ATT_FACTOR+Math.pow(e,2)),this.ATT_FACTOR)}sin(e,n){return Math.sin(e-n)}yRelativePos(e){let n=0;for(let t=0;t<this.noOfCurves;t++){let a=4*(-1+t/(this.noOfCurves-1)*2);a+=this.offsets[t];const i=1/this.widths[t],o=e*i-a;n+=Math.abs(this.amplitudes[t]*this.sin(this.verses[t]*o,this.phases[t])*this.globalAttFn(o))}return n/this.noOfCurves}yPos(e){return this.AMPLITUDE_FACTOR*this.ctrl.heightMax*this.ctrl.amplitude*this.yRelativePos(e)*this.globalAttFn(e/this.GRAPH_X*2)}xPos(e){return this.ctrl.width*((e+this.GRAPH_X)/(this.GRAPH_X*2))}drawSupportLine(){const{ctx:e}=this.ctrl,n=[0,this.ctrl.heightMax,this.ctrl.width,1],t=e.createLinearGradient.apply(e,n);t.addColorStop(0,"transparent"),t.addColorStop(.1,"rgba(255,255,255,.5)"),t.addColorStop(1-.1-.1,"rgba(255,255,255,.5)"),t.addColorStop(1,"transparent"),e.fillStyle=t,e.fillRect.apply(e,n)}draw(){const{ctx:e}=this.ctrl;if(e.globalAlpha=.7,e.globalCompositeOperation=this.ctrl.opt.globalCompositeOperation,this.spawnAt===0&&this.spawn(),this.definition.supportLine)return this.drawSupportLine();for(let t=0;t<this.noOfCurves;t++)this.spawnAt+this.despawnTimeouts[t]<=Date.now()?this.amplitudes[t]-=this.DESPAWN_FACTOR:this.amplitudes[t]+=this.DESPAWN_FACTOR,this.amplitudes[t]=Math.min(Math.max(this.amplitudes[t],0),this.finalAmplitudes[t]),this.phases[t]=(this.phases[t]+this.ctrl.speed*this.speeds[t]*this.SPEED_FACTOR)%(2*Math.PI);let n=-1/0;for(const t of[1,-1]){e.beginPath();for(let a=-this.GRAPH_X;a<=this.GRAPH_X;a+=this.ctrl.opt.pixelDepth){const i=this.xPos(a),o=this.yPos(a);e.lineTo(i,this.ctrl.heightMax-t*o),n=Math.max(n,o)}e.closePath(),e.fillStyle=`rgba(${this.definition.color}, 1)`,e.strokeStyle=`rgba(${this.definition.color}, 1)`,e.fill()}return n<this.DEAD_PX&&this.prevMaxY>n&&(this.spawnAt=0),this.prevMaxY=n,null}static getDefinition(){return[{color:"255,255,255",supportLine:!1},{color:"15, 82, 169"},{color:"173, 57, 76"},{color:"48, 220, 155"}]}}class v{constructor(e){var{container:n}=e,t=E(e,["container"]);this.phase=0,this.run=!1,this.curves=[];const a=window.getComputedStyle(n);this.opt=Object.assign({container:n,style:"ios",ratio:window.devicePixelRatio||1,speed:.2,amplitude:1,frequency:6,color:"#fff",cover:!1,width:parseInt(a.width.replace("px",""),10),height:parseInt(a.height.replace("px",""),10),autostart:!0,pixelDepth:.02,lerpSpeed:.1,globalCompositeOperation:"lighter"},t),this.speed=Number(this.opt.speed),this.amplitude=Number(this.opt.amplitude),this.width=Number(this.opt.ratio*this.opt.width),this.height=Number(this.opt.ratio*this.opt.height),this.heightMax=Number(this.height/2)-6,this.color=`rgb(${this.hex2rgb(this.opt.color)})`,this.interpolation={speed:this.speed,amplitude:this.amplitude},this.canvas=document.createElement("canvas");const i=this.canvas.getContext("2d");if(i===null)throw new Error("Unable to create 2D Context");this.ctx=i,this.canvas.width=this.width,this.canvas.height=this.height,this.opt.cover===!0?this.canvas.style.width=this.canvas.style.height="100%":(this.canvas.style.width=`${this.width/this.opt.ratio}px`,this.canvas.style.height=`${this.height/this.opt.ratio}px`),this.opt.style==="ios9"?this.curves=(this.opt.curveDefinition||h.getDefinition()).map(o=>new h(this,o)):this.curves=(this.opt.curveDefinition||l.getDefinition()).map(o=>new l(this,o)),this.opt.container.appendChild(this.canvas),this.opt.autostart&&this.start()}hex2rgb(e){const n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(n,(a,i,o,m)=>i+i+o+o+m+m);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?`${parseInt(t[1],16).toString()},${parseInt(t[2],16).toString()},${parseInt(t[3],16).toString()}`:null}intLerp(e,n,t){return e*(1-t)+n*t}lerp(e){const n=this.interpolation[e];return n!==null&&(this[e]=this.intLerp(this[e],n,this.opt.lerpSpeed),this[e]-n===0&&(this.interpolation[e]=null)),this[e]}clear(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="source-over"}draw(){this.curves.forEach(e=>e.draw())}startDrawCycle(){this.clear(),this.lerp("amplitude"),this.lerp("speed"),this.draw(),this.phase=(this.phase+Math.PI/2*this.speed)%(2*Math.PI),window.requestAnimationFrame?this.animationFrameId=window.requestAnimationFrame(this.startDrawCycle.bind(this)):this.timeoutId=setTimeout(this.startDrawCycle.bind(this),20)}start(){if(!this.canvas)throw new Error("This instance of SiriWave has been disposed, please create a new instance");this.phase=0,this.run||(this.run=!0,this.startDrawCycle())}stop(){this.phase=0,this.run=!1,this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId),this.timeoutId&&clearTimeout(this.timeoutId)}dispose(){this.stop(),this.canvas&&(this.canvas.remove(),this.canvas=null)}set(e,n){this.interpolation[e]=n}setSpeed(e){this.set("speed",e)}setAmplitude(e){this.set("amplitude",e)}}function b(u){var e=u.querySelector(".cz-bowl-btn"),n=u.querySelector(".cz-bowl-audio");if(!e||!n)return;var t=u.querySelector(".cz-bowl-wave");t||(t=document.createElement("div"),t.className="cz-bowl-wave",e.insertAdjacentElement("afterend",t));var a=null,i=null;function o(){a?a.start():a=new v({container:t,style:"ios9",cover:!0,autostart:!0,speed:.2,amplitude:24}),i&&(clearTimeout(i),i=null),t.style.display="block",u.classList.add("is-playing"),a.setAmplitude(1)}function m(){a&&(a.setAmplitude(0),i=setTimeout(function(){a&&(a.dispose(),a=null),t.style.display="none",u.classList.remove("is-playing")},0))}e.addEventListener("click",function(){try{n.currentTime=0}catch{}n.play().catch(function(){})}),n.addEventListener("play",o),n.addEventListener("playing",o),n.addEventListener("pause",m),n.addEventListener("ended",m),e.addEventListener("keydown",function(y){(y.key===" "||y.key==="Enter")&&(y.preventDefault(),e.click())})}function w(u){document.readyState!=="loading"?u():document.addEventListener("DOMContentLoaded",u)}w(function(){document.querySelectorAll(".cz-bowl").forEach(b)})})(),(function(){function E(l){document.readyState!=="loading"?l():document.addEventListener("DOMContentLoaded",l)}E(function(){var l=document.querySelector(".top-nav-bar .nav-toggle"),h=document.getElementById("nav-drawer"),v=document.querySelectorAll("[data-nav-drawer-close]"),b=document.querySelector(".top-nav-bar");if(!l||!h||!b)return;function w(){var t=b.getBoundingClientRect(),a=t.bottom||b.offsetHeight||72;document.documentElement.style.setProperty("--top-nav-height",a+"px")}var u=!1;function e(){u||(u=!0,window.requestAnimationFrame(function(){u=!1,w()}))}function n(t){w(),document.body.classList.toggle("nav-drawer-open",t),l.setAttribute("aria-expanded",t?"true":"false"),h.setAttribute("aria-hidden",t?"false":"true")}l.addEventListener("click",function(){var t=document.body.classList.contains("nav-drawer-open");n(!t)}),v.forEach(function(t){t.addEventListener("click",function(){n(!1)})}),document.addEventListener("keydown",function(t){t.key==="Escape"&&n(!1)}),w(),window.addEventListener("resize",e),window.addEventListener("scroll",e,{passive:!0}),window.visualViewport&&(window.visualViewport.addEventListener("resize",e),window.visualViewport.addEventListener("scroll",e))})})(),(function(){function E(l){document.readyState!=="loading"?l():document.addEventListener("DOMContentLoaded",l)}E(function(){var l=document.querySelector(".top-nav-bar"),h=l?l.querySelector(".nav-search-toggle"):null,v=l?l.querySelector(".nav-search-close"):null,b=document.getElementById("top-nav-search"),w=b?b.querySelector(".search-field"):null,u=window.matchMedia("(max-width: 768px)");if(!l||!h||!v||!b)return;function e(n){if(!u.matches){l.classList.remove("is-search-open"),h.setAttribute("aria-expanded","false"),b.removeAttribute("aria-hidden");return}l.classList.toggle("is-search-open",n),h.setAttribute("aria-expanded",n?"true":"false"),b.setAttribute("aria-hidden",n?"false":"true"),n&&w&&w.focus({preventScroll:!0})}h.addEventListener("click",function(){e(!0)}),v.addEventListener("click",function(){e(!1)}),document.addEventListener("keydown",function(n){n.key==="Escape"&&l.classList.contains("is-search-open")&&e(!1)}),u.addEventListener?u.addEventListener("change",function(){e(!1)}):u.addListener&&u.addListener(function(){e(!1)}),e(!1)})})(),(function(){function E(h){document.readyState!=="loading"?h():document.addEventListener("DOMContentLoaded",h)}function l(h){return String(h||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}E(function(){var h=window.cignoZenSearch||{},v=h.ajaxUrl||"",b=h.action||"cignozen_search_suggestions",w=Number(h.minChars||2),u=document.querySelector(".js-live-search-form"),e=u?u.querySelector(".js-live-search-input"):null,n=u?u.querySelector(".search-suggestions"):null;if(!u||!e||!n||!v)return;var t=-1,a=[],i=null,o=null,m=null;function y(){n.hidden=!0,n.innerHTML="",a=[],t=-1,e.setAttribute("aria-expanded","false"),e.removeAttribute("aria-activedescendant")}function _(L){t=L;var O=n.querySelectorAll(".search-suggestions__item");O.forEach(function(x,F){x.classList.toggle("is-active",F===t)}),t>=0&&O[t]?(e.setAttribute("aria-activedescendant",O[t].id),O[t].scrollIntoView({block:"nearest"})):e.removeAttribute("aria-activedescendant")}function g(L){if(a=L||[],t=-1,!a.length){y();return}var O=l(e.value.trim()),x=a.map(function(F,G){var W=l(F.title||""),z=F.label?l(F.label):"";return'<a href="'+l(F.url||"#")+'" id="search-suggestion-'+G+'" role="option" class="search-suggestions__item" data-index="'+G+'"><span class="search-suggestions__title">'+W+"</span>"+(z?'<span class="search-suggestions__type">'+z+"</span>":"")+"</a>"}).join("");n.innerHTML='<div class="search-suggestions__list">'+x+'</div><div class="search-suggestions__footer"><span class="search-suggestions__footer-key">Invio</span><span class="search-suggestions__footer-text">per vedere tutti i risultati per \u201C'+O+"\u201D</span></div>",n.hidden=!1,e.setAttribute("aria-expanded","true")}function T(L){m&&m.abort(),m=new AbortController;var O=new URLSearchParams({action:b,q:L});fetch(v+"?"+O.toString(),{method:"GET",credentials:"same-origin",signal:m.signal}).then(function(x){if(!x.ok)throw new Error("Search request failed");return x.json()}).then(function(x){var F=x&&x.success?x.data.items||[]:[];g(F)}).catch(function(x){x&&x.name==="AbortError"||y()})}e.addEventListener("input",function(){var L=e.value.trim();if(i&&window.clearTimeout(i),L.length<w){y();return}i=window.setTimeout(function(){T(L)},180)}),e.addEventListener("keydown",function(L){n.hidden||!a.length||(L.key==="ArrowDown"?(L.preventDefault(),_((t+1)%a.length)):L.key==="ArrowUp"?(L.preventDefault(),_((t-1+a.length)%a.length)):L.key==="Escape"?y():L.key==="Enter"&&t>=0&&a[t]&&(L.preventDefault(),window.location.href=a[t].url))}),n.addEventListener("mousemove",function(L){var O=L.target.closest(".search-suggestions__item");if(!(!O||!n.contains(O))){var x=Number(O.getAttribute("data-index"));!Number.isNaN(x)&&x!==t&&_(x)}}),n.addEventListener("click",function(L){var O=L.target.closest(".search-suggestions__item");!O||!n.contains(O)||y()}),e.addEventListener("blur",function(){o=window.setTimeout(y,140)}),e.addEventListener("focus",function(){o&&window.clearTimeout(o)}),document.addEventListener("click",function(L){u.contains(L.target)||y()})})})(),(function(){function E(l){document.readyState!=="loading"?l():document.addEventListener("DOMContentLoaded",l)}E(function(){var l=Array.from(document.querySelectorAll(".js-reveal-audio-player"));l.length&&l.forEach(function(h){var v=h.getAttribute("data-label-collapsed")||"Ascolta Audio",b=h.getAttribute("data-label-expanded")||"Nascondi Audio";h.textContent=v,h.addEventListener("click",function(){var w=(h.getAttribute("aria-controls")||"").trim();if(w){var u=document.getElementById(w);if(u){var e=u.hasAttribute("hidden");e?(u.removeAttribute("hidden"),h.setAttribute("aria-expanded","true"),h.textContent=b):(u.setAttribute("hidden",""),h.setAttribute("aria-expanded","false"),h.textContent=v)}}})})})})();
//# sourceMappingURL=script.min.js.map
