(function(A){function v(g){var y=A.getElementById("search-bar");y.style.display==="none"||y.style.display===""?y.style.display="block":y.style.display="none",A.querySelectorAll(".menu-label").forEach(E=>E.classList.toggle("hidden"));var w=A.getElementById("menu-button");w.classList.toggle("rotated")}A.addEventListener("DOMContentLoaded",function(){var g=A.getElementById("site-menu-toggle");g.addEventListener("click",v)})})(document),function(){function A(e,i){return(i||document).querySelector(e)}function v(e,i){return Array.prototype.slice.call((i||document).querySelectorAll(e))}function g(e){var i=e.getAttribute("data-toggle-target")||"#"+(e.getAttribute("aria-controls")||"").trim();if(!i)return null;try{return document.querySelector(i)}catch{return null}}function y(e){var i=(e.getAttribute("data-scroll-target")||"").trim();if(!i)return null;try{return document.querySelector(i)}catch{return null}}function w(e,i){var a=e.querySelector(".more-link-button"),n=e.querySelector(".more-link-lable-top"),r=e.querySelector(".more-link-lable-bottom");e.setAttribute("aria-expanded",String(i)),a&&a.classList.toggle("rotated",i),n&&n.classList.toggle("hidden",i),r&&r.classList.toggle("hidden",!i);var u=g(e);u&&(i?u.removeAttribute("hidden"):u.setAttribute("hidden",""))}function E(e){if(!(!e||!("scrollIntoView"in e)))try{e.scrollIntoView({behavior:"smooth",block:"start"})}catch{e.scrollIntoView(!0)}}function f(e){e&&e.preventDefault();var i=e.currentTarget,a=i.getAttribute("aria-expanded")!=="true";w(i,a);var n=i.getAttribute("data-toggle-target")||"#"+(i.getAttribute("aria-controls")||"").trim();if(n&&v(".js-toggle").forEach(function(m){if(m!==i){var C=m.getAttribute("data-toggle-target")||"#"+(m.getAttribute("aria-controls")||"").trim();C===n&&w(m,a)}}),!a){var r=y(i);if(!r&&n){var u=v(".js-toggle").find(function(m){if(m===i)return!1;var C=m.getAttribute("data-toggle-target")||"#"+(m.getAttribute("aria-controls")||"").trim();return C===n&&m.hasAttribute("data-scroll-target")});u&&(r=y(u))}r&&E(r)}}function t(e){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),f(e))}document.addEventListener("DOMContentLoaded",function(){v(".js-toggle").forEach(function(e){w(e,!1),e.addEventListener("click",f),e.addEventListener("keydown",t)})})}(),(()=>{const A=(s,o=document)=>Array.from(o.querySelectorAll(s)),v=(s,o=document)=>o.querySelector(s),g=s=>window.CSS&&CSS.escape?CSS.escape(s):(s||"").replace(/[^a-zA-Z0-9_\-]/g,"\\$&"),y=s=>{try{const o=s&&s.includes("#")?s.split("#").pop():"";return decodeURIComponent((o||"").trim())}catch{return""}},w=(s,o)=>{const l=d=>{if(!d||d.nodeType!==1)return!1;const h=(d.textContent||"").trim();if(!/^\[?\(?\d+\)?[\.\:\]]?$/.test(h))return!1;if(d.tagName==="A"){const b=(d.getAttribute("href")||"").trim(),_=d.className||"";if(b.includes("#")){const L=b.split("#").pop();if(L==="fnref"+o.replace(/^fn/,"")||/fnref|ref|note/i.test(L)||/fnref|ref|note/i.test(_))return!0}return!1}return["SUP","SPAN","EM","STRONG","B","I"].includes(d.tagName)};let c=3;for(;s.firstChild&&c-- >0;){if(l(s.firstChild)){s.removeChild(s.firstChild);continue}break}},E=s=>{A("a",s).forEach(o=>{const l=o.getAttribute("href")||"",c=o.className||"",d=o.getAttribute("role")||"",h=(o.getAttribute("aria-label")||o.getAttribute("title")||"").toLowerCase(),p=(o.textContent||"").replace(/[\uFE0E\uFE0F]/g,"").trim(),b=l.includes("#"),_=b?l.split("#").pop():"",L=/(^|\s)fnref(\s|$)/i.test(c)||/^fnref/i.test(_),O=/backlink|backref|return|footnote[-_]?return/i.test(c)||d.toLowerCase()==="doc-backlink"||h.includes("back")||h.includes("ritorna")||h.includes("torna")||/↩|↪|↑|⬆/.test(p);(b&&(L||O)||O)&&o.remove()})},f=s=>{if(!s)return"";let o=document.querySelector(`p.footnote#${g(s)}`);if(!o){const p=document.getElementById(s);p&&(o=p.matches("p.footnote")?p:p.querySelector("p.footnote, p"))}if(!o)return"";const l=o.cloneNode(!0);E(l);const c=l.innerHTML.trim(),d=o.cloneNode(!0);return w(d,s),E(d),((d.textContent||"").trim()?d.innerHTML.trim():c)||c},t=(s,o)=>{const l=d=>{const h=String(d||"").trim().match(/^\s*[\[\(]?(\d+)[\]\)\.:]?\s*$/);return h?h[1]:""};let c=l(s.textContent||s.innerText||"");if(!c&&s.closest("sup")&&(c=l(s.closest("sup").textContent||"")),!c){const d=(o||"").match(/(\d+)(?!.*\d)/);c=d?d[1]:s.textContent||o||""}return c};let e={anchor:null,popup:null,overlay:null};const i=()=>{var s,o,l,c;(s=e.popup)==null||s.remove(),(o=e.overlay)==null||o.remove(),(c=(l=e.anchor)==null?void 0:l.focus)==null||c.call(l,{preventScroll:!0}),e={anchor:null,popup:null,overlay:null},document.removeEventListener("keydown",a),window.removeEventListener("resize",n),window.removeEventListener("scroll",n,!0)},a=s=>{s.key==="Escape"&&i()},n=()=>{e.popup&&e.anchor&&m(e.popup,e.anchor)},r=(s,o)=>{const l=document.createElement("div");l.className="footnote-overlay",l.addEventListener("click",i,{passive:!0});const c=document.createElement("div");c.className="footnote-popup",c.setAttribute("role","dialog"),c.setAttribute("aria-modal","true"),c.style.boxSizing="border-box";const d=`footnote-popup-title-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,7)}`;c.setAttribute("aria-labelledby",d);const h=document.createElement("button");h.className="footnote-popup-close",h.type="button",h.setAttribute("aria-label","Chiudi nota"),h.textContent="\xD7",h.addEventListener("click",i);const p=document.createElement("div");p.className="footnote-popup-title",p.id=d,p.textContent=`${o}`;const b=document.createElement("div");return b.className="footnote-popup-content",b.innerHTML=s,T(b),c.appendChild(h),c.appendChild(p),c.appendChild(b),{popup:c,overlay:l}},u=680,m=(s,o)=>{s.style.minWidth="240px",s.style.visibility="hidden",s.style.left="0px",s.style.top="0px",s.isConnected||document.body.appendChild(s);const c=o.getBoundingClientRect(),d=document.documentElement.clientWidth,h=document.documentElement.clientHeight,p=s.querySelector(".footnote-popup-content"),b=Math.max(0,h-(c.bottom+8)),_=Math.max(0,c.top-8),L=b>=_,O=p.style.maxHeight;p.style.maxHeight="";const I=s.getBoundingClientRect().height-p.getBoundingClientRect().height,q=Math.max(120,Math.floor((L?b:_)-I-8));p.style.maxHeight=`${q}px`,p.style.overflow="auto";const x=s.getBoundingClientRect();let R=window.scrollY+(L?c.bottom+8:c.top-x.height-8);R<window.scrollY+8&&(R=window.scrollY+8),R+x.height>window.scrollY+h-8&&(R=window.scrollY+h-x.height-8);let D=window.scrollX+c.left+(c.width-x.width)/2;D=Math.max(window.scrollX+8,Math.min(D,window.scrollX+d-x.width-8)),s.style.left=`${D}px`,s.style.top=`${R}px`,s.style.visibility="visible",d<=u?s.style.right="auto":s.style.right=""},C=(s,o)=>{const l=f(o);if(!l)return;const c=t(s,o);i();const{popup:d,overlay:h}=r(l,c);document.body.appendChild(h),e={anchor:s,popup:d,overlay:h},m(d,s),document.addEventListener("keydown",a),window.addEventListener("resize",n),window.addEventListener("scroll",n,!0),(d.querySelector("button")||d).focus({preventScroll:!0})},S=()=>{document.addEventListener("click",s=>{if(s.metaKey||s.ctrlKey||s.shiftKey||s.button===1)return;const o=s.target.closest('sup.fn a[href], a.footnote-ref[href], sup a[href^="#fn"]');if(!o)return;const l=y(o.getAttribute("href")||"");!l||!(document.querySelector(`p.footnote#${g(l)}`)||document.getElementById(l))||(s.preventDefault(),C(o,l))})},T=s=>{if(!s)return;s.addEventListener("wheel",l=>{const{scrollTop:c,scrollHeight:d,clientHeight:h}=s,p=c===0,b=Math.ceil(c+h)>=d;(p&&l.deltaY<0||b&&l.deltaY>0)&&l.preventDefault(),l.stopPropagation()},{passive:!1});let o=0;s.addEventListener("touchstart",l=>{o=l.touches?l.touches[0].clientY:0},{passive:!0}),s.addEventListener("touchmove",l=>{const c=l.touches?l.touches[0].clientY:0,d=o-c,{scrollTop:h,scrollHeight:p,clientHeight:b}=s,_=h===0,L=Math.ceil(h+b)>=p;(_&&d<0||L&&d>0)&&l.preventDefault(),l.stopPropagation()},{passive:!1})},P=()=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 24 24"),s.setAttribute("width","32"),s.setAttribute("height","32"),s.setAttribute("aria-hidden","true"),s.style.flex="0 0 auto",s.style.transition="transform .2s ease",s.classList.add("footnotes-chevron");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d","M6.23 8.97a1 1 0 0 1 1.41 0L12 13.34l4.36-4.37a1 1 0 1 1 1.41 1.42l-5.06 5.06a1 1 0 0 1-1.41 0L6.23 10.4a1 1 0 0 1 0-1.42z"),o.setAttribute("fill","currentColor"),s.appendChild(o),s},M=s=>{if(!s||s.__czFootnotesReady)return;let o=s.querySelector(":scope > [id]");(!o||!/^H[2-6]$/.test(o.tagName))&&(o=s.querySelector(":scope > h2, :scope > h3, :scope > h4, :scope > h5, :scope > h6"));const l=s.querySelector(":scope > .footnotes-content");if(!o||!l)return;if(o.setAttribute("role","button"),o.setAttribute("tabindex","0"),o.setAttribute("aria-expanded","false"),!o.querySelector(".footnotes-chevron")){const h=P(),p=document.createElement("span");for(p.className="footnotes-toggle-text";o.firstChild;)p.appendChild(o.firstChild);o.appendChild(h),o.appendChild(p),o.style.display="inline-flex",o.style.alignItems="center",o.style.gap=".5rem",h.style.transform="rotate(-90deg)"}l.hidden=!0;const c=h=>{const p=o.querySelector(".footnotes-chevron");o.setAttribute("aria-expanded",h?"true":"false"),l.hidden=!h,p&&(p.style.transform=h?"rotate(0deg)":"rotate(-90deg)")},d=h=>{h.preventDefault(),c(l.hidden)};o.addEventListener("click",d),o.addEventListener("keydown",h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),d(h))}),s.__czFootnotesReady=!0},k=(s=document)=>{A("div.footnotes",s).forEach(M)},F=()=>{k(),S()};document.readyState!=="loading"?F():document.addEventListener("DOMContentLoaded",F);const N=new MutationObserver(s=>{for(const o of s)o.addedNodes&&o.addedNodes.forEach(l=>{!l||l.nodeType!==1||typeof l.querySelectorAll=="function"&&(l.matches&&l.matches("div.footnotes")?M(l):k(l))})});try{N.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}})(),function(){var A="cz-theme",v=document.documentElement,g=document.getElementById("theme-toggle");if(!g)return;function y(e){v.setAttribute("data-theme",e);try{localStorage.setItem(A,e)}catch{}g.setAttribute("aria-pressed",e==="dark")}var w=localStorage.getItem(A);if(w)y(w);else{var E=window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches;y(E?"light":"dark")}var f=720,t;g.addEventListener("click",function(){if(!g.classList.contains("animating")){var e=v.getAttribute("data-theme")||"dark",i=e==="dark"?"light":"dark",a=i==="dark"?"anim-to-dark":"anim-to-light";g.classList.add("animating",a),requestAnimationFrame(function(){y(i),clearTimeout(t),t=setTimeout(function(){g.classList.remove("animating","anim-to-dark","anim-to-light")},f)})}})}(),function(){function A(n){return n&&typeof n.querySelectorAll=="function"?n:document}function v(n,r){return A(r).querySelector(n)}function g(n,r){return Array.from(A(r).querySelectorAll(n))}const y=n=>n&&(n.tagName==="BUTTON"||n.getAttribute("role")==="button"),w=()=>{const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 24 24"),n.setAttribute("width","48"),n.setAttribute("height","48"),n.setAttribute("aria-hidden","true"),n.style.flex="0 0 auto",n.style.transition="transform .2s ease",n.classList.add("collapsable-chevron");const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d","M6.23 8.97a1 1 0 0 1 1.41 0L12 13.34l4.36-4.37a1 1 0 1 1 1.41 1.42l-5.06 5.06a1 1 0 0 1-1.41 0L6.23 10.4a1 1 0 0 1 0-1.42z"),r.setAttribute("fill","currentColor"),n.appendChild(r),n},E=(n,r)=>{const u=v(".collapsable-toggle",n),m=v(".collapsable-content",n);if(!u||!m)return;const C=v(".collapsable-chevron",u),S=n.classList.contains("is-open");r!==S&&(n.classList.toggle("is-open",r),u.setAttribute("aria-expanded",r?"true":"false"),m.setAttribute("aria-hidden",r?"false":"true"),m.style.display=r?"":"none",C&&(C.style.transform=r?"rotate(0deg)":"rotate(-90deg)"))},f=n=>{y(n)||(n.setAttribute("role","button"),n.setAttribute("tabindex","0")),n.style.cursor="pointer"},t=(n,r="collapsable-content-")=>(n.id||(n.id=r+Math.random().toString(36).slice(2,9)),n.id),e=n=>{if(!n||n.__collapsableReady)return;const r=v(".collapsable-toggle",n),u=v(".collapsable-content",n);if(!r||!u)return;if(!v(".collapsable-chevron",r)){const S=w(),T=document.createElement("span");for(T.className="collapsable-toggle-text";r.firstChild;)T.appendChild(r.firstChild);r.appendChild(T),r.insertBefore(S,T),r.style.display="inline-flex",r.style.alignItems="center",r.style.gap=".5rem"}f(r),t(u),r.setAttribute("aria-controls",u.id);const m=(n.getAttribute("data-initial")||"").toLowerCase();E(n,m!=="closed");const C=S=>{S.preventDefault(),E(n,!n.classList.contains("is-open"))};r.addEventListener("click",C),r.addEventListener("keydown",S=>{(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),C(S))}),n.__collapsableReady=!0},i=n=>{g(".collapsable-section",n).forEach(e)};document.readyState!=="loading"?i():document.addEventListener("DOMContentLoaded",i);const a=new MutationObserver(n=>{for(const r of n)r.addedNodes&&r.addedNodes.forEach(u=>{!u||u.nodeType!==1||typeof u.querySelectorAll=="function"&&(u.matches&&u.matches(".collapsable-section")?e(u):i(u))})});try{a.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}}(),function(){const A=document.getElementById("latest-articles");if(!A)return;function v(){const g=A.querySelector(".cz-carousel");if(!g)return;const y=g.querySelector(".cz-carousel-track"),w=Array.from(y.querySelectorAll(".article-card")),E=Array.from(g.querySelectorAll(".cz-carousel-dot")),f=window.matchMedia("(max-width: 587px)");let t=0;function e(){if(!f.matches){y.style.transform="none";return}y.style.transform="translateX("+-t*100+"%)"}function i(a){E.forEach((n,r)=>{n.classList.toggle("is-active",r===a),n.setAttribute("aria-selected",r===a?"true":"false")})}E.forEach(a=>{a.addEventListener("click",function(){t=Math.max(0,Math.min(w.length-1,parseInt(this.dataset.index||"0",10))),e(),i(t)})}),f.addEventListener("change",e),window.addEventListener("resize",e),e(),i(t)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v):v()}(),function(){"use strict";function A(f,t){var e={};for(var i in f)Object.prototype.hasOwnProperty.call(f,i)&&t.indexOf(i)<0&&(e[i]=f[i]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(f);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(f,i[a])&&(e[i[a]]=f[i[a]]);return e}class v{constructor(t,e){this.ATT_FACTOR=4,this.GRAPH_X=2,this.AMPLITUDE_FACTOR=.6,this.ctrl=t,this.definition=e}globalAttFn(t){return Math.pow(this.ATT_FACTOR/(this.ATT_FACTOR+Math.pow(t,this.ATT_FACTOR)),this.ATT_FACTOR)}xPos(t){return this.ctrl.width*((t+this.GRAPH_X)/(this.GRAPH_X*2))}yPos(t){return this.AMPLITUDE_FACTOR*(this.globalAttFn(t)*(this.ctrl.heightMax*this.ctrl.amplitude)*(1/this.definition.attenuation)*Math.sin(this.ctrl.opt.frequency*t-this.ctrl.phase))}draw(){const{ctx:t}=this.ctrl;t.moveTo(0,0),t.beginPath();const i=(this.definition.color||this.ctrl.color).replace(/rgb\(/g,"").replace(/\)/g,"");t.strokeStyle=`rgba(${i},${this.definition.opacity})`,t.lineWidth=this.definition.lineWidth;for(let a=-this.GRAPH_X;a<=this.GRAPH_X;a+=this.ctrl.opt.pixelDepth)t.lineTo(this.xPos(a),this.ctrl.heightMax+this.yPos(a));t.stroke()}static getDefinition(){return[{attenuation:-2,lineWidth:1,opacity:.1},{attenuation:-6,lineWidth:1,opacity:.2},{attenuation:4,lineWidth:1,opacity:.4},{attenuation:2,lineWidth:1,opacity:.6},{attenuation:1,lineWidth:1.5,opacity:1}]}}class g{constructor(t,e){this.GRAPH_X=25,this.AMPLITUDE_FACTOR=.8,this.SPEED_FACTOR=1,this.DEAD_PX=2,this.ATT_FACTOR=4,this.DESPAWN_FACTOR=.02,this.DEFAULT_NOOFCURVES_RANGES=[2,5],this.DEFAULT_AMPLITUDE_RANGES=[.3,1],this.DEFAULT_OFFSET_RANGES=[-3,3],this.DEFAULT_WIDTH_RANGES=[1,3],this.DEFAULT_SPEED_RANGES=[.5,1],this.DEFAULT_DESPAWN_TIMEOUT_RANGES=[500,2e3],this.ctrl=t,this.definition=e,this.noOfCurves=0,this.spawnAt=0,this.prevMaxY=0,this.phases=[],this.offsets=[],this.speeds=[],this.finalAmplitudes=[],this.widths=[],this.amplitudes=[],this.despawnTimeouts=[],this.verses=[]}getRandomRange(t){return t[0]+Math.random()*(t[1]-t[0])}spawnSingle(t){var e,i,a,n,r,u,m,C,S,T;this.phases[t]=0,this.amplitudes[t]=0,this.despawnTimeouts[t]=this.getRandomRange((i=(e=this.ctrl.opt.ranges)===null||e===void 0?void 0:e.despawnTimeout)!==null&&i!==void 0?i:this.DEFAULT_DESPAWN_TIMEOUT_RANGES),this.offsets[t]=this.getRandomRange((n=(a=this.ctrl.opt.ranges)===null||a===void 0?void 0:a.offset)!==null&&n!==void 0?n:this.DEFAULT_OFFSET_RANGES),this.speeds[t]=this.getRandomRange((u=(r=this.ctrl.opt.ranges)===null||r===void 0?void 0:r.speed)!==null&&u!==void 0?u:this.DEFAULT_SPEED_RANGES),this.finalAmplitudes[t]=this.getRandomRange((C=(m=this.ctrl.opt.ranges)===null||m===void 0?void 0:m.amplitude)!==null&&C!==void 0?C:this.DEFAULT_AMPLITUDE_RANGES),this.widths[t]=this.getRandomRange((T=(S=this.ctrl.opt.ranges)===null||S===void 0?void 0:S.width)!==null&&T!==void 0?T:this.DEFAULT_WIDTH_RANGES),this.verses[t]=this.getRandomRange([-1,1])}getEmptyArray(t){return new Array(t)}spawn(){var t,e;this.spawnAt=Date.now(),this.noOfCurves=Math.floor(this.getRandomRange((e=(t=this.ctrl.opt.ranges)===null||t===void 0?void 0:t.noOfCurves)!==null&&e!==void 0?e:this.DEFAULT_NOOFCURVES_RANGES)),this.phases=this.getEmptyArray(this.noOfCurves),this.offsets=this.getEmptyArray(this.noOfCurves),this.speeds=this.getEmptyArray(this.noOfCurves),this.finalAmplitudes=this.getEmptyArray(this.noOfCurves),this.widths=this.getEmptyArray(this.noOfCurves),this.amplitudes=this.getEmptyArray(this.noOfCurves),this.despawnTimeouts=this.getEmptyArray(this.noOfCurves),this.verses=this.getEmptyArray(this.noOfCurves);for(let i=0;i<this.noOfCurves;i++)this.spawnSingle(i)}globalAttFn(t){return Math.pow(this.ATT_FACTOR/(this.ATT_FACTOR+Math.pow(t,2)),this.ATT_FACTOR)}sin(t,e){return Math.sin(t-e)}yRelativePos(t){let e=0;for(let i=0;i<this.noOfCurves;i++){let a=4*(-1+i/(this.noOfCurves-1)*2);a+=this.offsets[i];const n=1/this.widths[i],r=t*n-a;e+=Math.abs(this.amplitudes[i]*this.sin(this.verses[i]*r,this.phases[i])*this.globalAttFn(r))}return e/this.noOfCurves}yPos(t){return this.AMPLITUDE_FACTOR*this.ctrl.heightMax*this.ctrl.amplitude*this.yRelativePos(t)*this.globalAttFn(t/this.GRAPH_X*2)}xPos(t){return this.ctrl.width*((t+this.GRAPH_X)/(this.GRAPH_X*2))}drawSupportLine(){const{ctx:t}=this.ctrl,e=[0,this.ctrl.heightMax,this.ctrl.width,1],i=t.createLinearGradient.apply(t,e);i.addColorStop(0,"transparent"),i.addColorStop(.1,"rgba(255,255,255,.5)"),i.addColorStop(1-.1-.1,"rgba(255,255,255,.5)"),i.addColorStop(1,"transparent"),t.fillStyle=i,t.fillRect.apply(t,e)}draw(){const{ctx:t}=this.ctrl;if(t.globalAlpha=.7,t.globalCompositeOperation=this.ctrl.opt.globalCompositeOperation,this.spawnAt===0&&this.spawn(),this.definition.supportLine)return this.drawSupportLine();for(let i=0;i<this.noOfCurves;i++)this.spawnAt+this.despawnTimeouts[i]<=Date.now()?this.amplitudes[i]-=this.DESPAWN_FACTOR:this.amplitudes[i]+=this.DESPAWN_FACTOR,this.amplitudes[i]=Math.min(Math.max(this.amplitudes[i],0),this.finalAmplitudes[i]),this.phases[i]=(this.phases[i]+this.ctrl.speed*this.speeds[i]*this.SPEED_FACTOR)%(2*Math.PI);let e=-1/0;for(const i of[1,-1]){t.beginPath();for(let a=-this.GRAPH_X;a<=this.GRAPH_X;a+=this.ctrl.opt.pixelDepth){const n=this.xPos(a),r=this.yPos(a);t.lineTo(n,this.ctrl.heightMax-i*r),e=Math.max(e,r)}t.closePath(),t.fillStyle=`rgba(${this.definition.color}, 1)`,t.strokeStyle=`rgba(${this.definition.color}, 1)`,t.fill()}return e<this.DEAD_PX&&this.prevMaxY>e&&(this.spawnAt=0),this.prevMaxY=e,null}static getDefinition(){return[{color:"255,255,255",supportLine:!1},{color:"15, 82, 169"},{color:"173, 57, 76"},{color:"48, 220, 155"}]}}class y{constructor(t){var{container:e}=t,i=A(t,["container"]);this.phase=0,this.run=!1,this.curves=[];const a=window.getComputedStyle(e);this.opt=Object.assign({container:e,style:"ios",ratio:window.devicePixelRatio||1,speed:.2,amplitude:1,frequency:6,color:"#fff",cover:!1,width:parseInt(a.width.replace("px",""),10),height:parseInt(a.height.replace("px",""),10),autostart:!0,pixelDepth:.02,lerpSpeed:.1,globalCompositeOperation:"lighter"},i),this.speed=Number(this.opt.speed),this.amplitude=Number(this.opt.amplitude),this.width=Number(this.opt.ratio*this.opt.width),this.height=Number(this.opt.ratio*this.opt.height),this.heightMax=Number(this.height/2)-6,this.color=`rgb(${this.hex2rgb(this.opt.color)})`,this.interpolation={speed:this.speed,amplitude:this.amplitude},this.canvas=document.createElement("canvas");const n=this.canvas.getContext("2d");if(n===null)throw new Error("Unable to create 2D Context");switch(this.ctx=n,this.canvas.width=this.width,this.canvas.height=this.height,this.opt.cover===!0?this.canvas.style.width=this.canvas.style.height="100%":(this.canvas.style.width=`${this.width/this.opt.ratio}px`,this.canvas.style.height=`${this.height/this.opt.ratio}px`),this.opt.style){case"ios9":this.curves=(this.opt.curveDefinition||g.getDefinition()).map(r=>new g(this,r));break;case"ios":default:this.curves=(this.opt.curveDefinition||v.getDefinition()).map(r=>new v(this,r));break}this.opt.container.appendChild(this.canvas),this.opt.autostart&&this.start()}hex2rgb(t){const e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,(a,n,r,u)=>n+n+r+r+u+u);const i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?`${parseInt(i[1],16).toString()},${parseInt(i[2],16).toString()},${parseInt(i[3],16).toString()}`:null}intLerp(t,e,i){return t*(1-i)+e*i}lerp(t){const e=this.interpolation[t];return e!==null&&(this[t]=this.intLerp(this[t],e,this.opt.lerpSpeed),this[t]-e===0&&(this.interpolation[t]=null)),this[t]}clear(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="source-over"}draw(){this.curves.forEach(t=>t.draw())}startDrawCycle(){this.clear(),this.lerp("amplitude"),this.lerp("speed"),this.draw(),this.phase=(this.phase+Math.PI/2*this.speed)%(2*Math.PI),window.requestAnimationFrame?this.animationFrameId=window.requestAnimationFrame(this.startDrawCycle.bind(this)):this.timeoutId=setTimeout(this.startDrawCycle.bind(this),20)}start(){if(!this.canvas)throw new Error("This instance of SiriWave has been disposed, please create a new instance");this.phase=0,this.run||(this.run=!0,this.startDrawCycle())}stop(){this.phase=0,this.run=!1,this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId),this.timeoutId&&clearTimeout(this.timeoutId)}dispose(){this.stop(),this.canvas&&(this.canvas.remove(),this.canvas=null)}set(t,e){this.interpolation[t]=e}setSpeed(t){this.set("speed",t)}setAmplitude(t){this.set("amplitude",t)}}function w(f){var t=f.querySelector(".cz-bowl-btn"),e=f.querySelector(".cz-bowl-audio");if(!t||!e)return;var i=f.querySelector(".cz-bowl-wave");i||(i=document.createElement("div"),i.className="cz-bowl-wave",t.insertAdjacentElement("afterend",i));var a=null,n=null;function r(){a?a.start():a=new y({container:i,style:"ios9",cover:!0,autostart:!0,speed:.2,amplitude:24}),n&&(clearTimeout(n),n=null),i.style.display="block",f.classList.add("is-playing"),a.setAmplitude(1)}function u(){a&&(a.setAmplitude(0),n=setTimeout(function(){a&&(a.dispose(),a=null),i.style.display="none",f.classList.remove("is-playing")},0))}t.addEventListener("click",function(){try{e.currentTime=0}catch{}e.play().catch(function(){})}),e.addEventListener("play",r),e.addEventListener("playing",r),e.addEventListener("pause",u),e.addEventListener("ended",u),t.addEventListener("keydown",function(m){(m.key===" "||m.key==="Enter")&&(m.preventDefault(),t.click())})}function E(f){document.readyState!=="loading"?f():document.addEventListener("DOMContentLoaded",f)}E(function(){document.querySelectorAll(".cz-bowl").forEach(w)})}();
//# sourceMappingURL=script.min.js.map
