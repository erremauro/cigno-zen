(function(E){function y(w){var A=E.getElementById("search-bar");A.style.display==="none"||A.style.display===""?A.style.display="block":A.style.display="none",E.querySelectorAll(".menu-label").forEach(_=>_.classList.toggle("hidden"));var T=E.getElementById("menu-button");T.classList.toggle("rotated")}E.addEventListener("DOMContentLoaded",function(){var w=E.getElementById("site-menu-toggle");w.addEventListener("click",y)})})(document),(function(){function E(i,t){return(t||document).querySelector(i)}function y(i,t){return Array.prototype.slice.call((t||document).querySelectorAll(i))}function w(i){var t=i.getAttribute("data-toggle-target")||"#"+(i.getAttribute("aria-controls")||"").trim();if(!t)return null;try{return document.querySelector(t)}catch{return null}}function A(i){var t=(i.getAttribute("data-scroll-target")||"").trim();if(!t)return null;try{return document.querySelector(t)}catch{return null}}function T(i,t){var a=i.querySelector(".more-link-button"),s=i.querySelector(".more-link-lable-top"),r=i.querySelector(".more-link-lable-bottom");i.setAttribute("aria-expanded",String(t)),a&&a.classList.toggle("rotated",t),s&&s.classList.toggle("hidden",t),r&&r.classList.toggle("hidden",!t);var f=w(i);f&&(t?f.removeAttribute("hidden"):f.setAttribute("hidden",""))}function _(i){if(!(!i||!("scrollIntoView"in i)))try{i.scrollIntoView({behavior:"smooth",block:"start"})}catch{i.scrollIntoView(!0)}}function m(i){i&&i.preventDefault();var t=i.currentTarget,a=t.getAttribute("aria-expanded")!=="true";T(t,a);var s=t.getAttribute("data-toggle-target")||"#"+(t.getAttribute("aria-controls")||"").trim();if(s&&y(".js-toggle").forEach(function(d){if(d!==t){var g=d.getAttribute("data-toggle-target")||"#"+(d.getAttribute("aria-controls")||"").trim();g===s&&T(d,a)}}),!a){var r=A(t);if(!r&&s){var f=y(".js-toggle").find(function(d){if(d===t)return!1;var g=d.getAttribute("data-toggle-target")||"#"+(d.getAttribute("aria-controls")||"").trim();return g===s&&d.hasAttribute("data-scroll-target")});f&&(r=A(f))}r&&_(r)}}function e(i){(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),m(i))}document.addEventListener("DOMContentLoaded",function(){y(".js-toggle").forEach(function(i){T(i,!1),i.addEventListener("click",m),i.addEventListener("keydown",e)})})})(),(()=>{const E=(n,o=document)=>Array.from(o.querySelectorAll(n)),y=(n,o=document)=>o.querySelector(n),w=n=>window.CSS&&CSS.escape?CSS.escape(n):(n||"").replace(/[^a-zA-Z0-9_\-]/g,"\\$&"),A=n=>{try{const o=n&&n.includes("#")?n.split("#").pop():"";return decodeURIComponent((o||"").trim())}catch{return""}},_=(n,o)=>{const c=u=>{if(!u||u.nodeType!==1)return!1;const l=(u.textContent||"").trim();if(!/^\[?\(?\d+\)?[\.\:\]]?$/.test(l))return!1;if(u.tagName==="A"){const b=(u.getAttribute("href")||"").trim(),S=u.className||"";if(b.includes("#")){const x=b.split("#").pop();if(x==="fnref"+o.replace(/^fn/,"")||/fnref|ref|note/i.test(x)||/fnref|ref|note/i.test(S))return!0}return!1}return["SUP","SPAN","EM","STRONG","B","I"].includes(u.tagName)};let h=3;for(;n.firstChild&&h-- >0;){if(c(n.firstChild)){n.removeChild(n.firstChild);continue}break}},m=n=>{E("a",n).forEach(o=>{const c=o.getAttribute("href")||"",h=o.className||"",u=o.getAttribute("role")||"",l=(o.getAttribute("aria-label")||o.getAttribute("title")||"").toLowerCase(),p=(o.textContent||"").replace(/[\uFE0E\uFE0F]/g,"").trim(),b=c.includes("#"),S=b?c.split("#").pop():"",x=/(^|\s)fnref(\s|$)/i.test(h)||/^fnref/i.test(S),F=/backlink|backref|return|footnote[-_]?return/i.test(h)||u.toLowerCase()==="doc-backlink"||l.includes("back")||l.includes("ritorna")||l.includes("torna")||/↩|↪|↑|⬆/.test(p);(b&&(x||F)||F)&&o.remove()})},e=n=>{if(!n)return"";let o=document.querySelector(`p.footnote#${w(n)}`);if(!o){const p=document.getElementById(n);p&&(o=p.matches("p.footnote")?p:p.querySelector("p.footnote, p"))}if(!o)return"";const c=o.cloneNode(!0);m(c);const h=c.innerHTML.trim(),u=o.cloneNode(!0);return _(u,n),m(u),((u.textContent||"").trim()?u.innerHTML.trim():h)||h},i=(n,o)=>{const c=u=>{const l=String(u||"").trim().match(/^\s*[\[\(]?(\d+)[\]\)\.:]?\s*$/);return l?l[1]:""};let h=c(n.textContent||n.innerText||"");if(!h&&n.closest("sup")&&(h=c(n.closest("sup").textContent||"")),!h){const u=(o||"").match(/(\d+)(?!.*\d)/);h=u?u[1]:n.textContent||o||""}return h};let t={anchor:null,popup:null,overlay:null};const a=()=>{var n,o,c,h;(n=t.popup)==null||n.remove(),(o=t.overlay)==null||o.remove(),(h=(c=t.anchor)==null?void 0:c.focus)==null||h.call(c,{preventScroll:!0}),t={anchor:null,popup:null,overlay:null},document.removeEventListener("keydown",s),window.removeEventListener("resize",r),window.removeEventListener("scroll",r,!0)},s=n=>{n.key==="Escape"&&a()},r=()=>{t.popup&&t.anchor&&O(t.popup,t.anchor)},f=(n,o)=>{const c=document.createElement("div");c.className="footnote-overlay",c.addEventListener("click",a,{passive:!0});const h=document.createElement("div");h.className="footnote-popup",h.setAttribute("role","dialog"),h.setAttribute("aria-modal","true");const u=`footnote-popup-title-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,7)}`;h.setAttribute("aria-labelledby",u);const l=document.createElement("button");l.className="footnote-popup-close",l.type="button",l.setAttribute("aria-label","Chiudi nota"),l.textContent="\xD7",l.addEventListener("click",a);const p=document.createElement("div");p.className="footnote-popup-title",p.id=u,p.textContent=`${o}`;const b=document.createElement("div");b.className="footnote-popup-content";const S=d(n,256);let x=null;return S.length>1?(b.classList.add("footnote-popup-content--paged"),b.style.overflow="hidden",b.style.maxHeight="none",S.forEach((F,P)=>{P!==0&&(F.hidden=!0),b.appendChild(F)}),x=g(S)):b.innerHTML=n,h.appendChild(l),h.appendChild(p),h.appendChild(b),x&&h.appendChild(x),{popup:h,overlay:c}},d=(n,o)=>{const c=document.createElement("div");c.innerHTML=n||"";const h=Array.from(c.childNodes),u=[];let l=document.createElement("div");l.className="footnote-page";let p=o;const b=v=>(v.textContent||"").length,S=(v,R)=>{if(R<=0)return[null,v];const N=v.nodeValue||"";if(N.length<=R)return[v,null];let L=R;for(;L>0&&!/\s/.test(N.charAt(L-1));)L-=1;L===0&&(L=R);const D=document.createTextNode(N.slice(0,L)),k=N.slice(L).replace(/^\s+/,""),M=k?document.createTextNode(k):null;return[D,M]},x=(v,R)=>{if(R<=0)return[null,v];if(v.nodeType===3)return S(v,R);if(v.nodeType!==1)return[v,null];const N=v.cloneNode(!1),L=v.cloneNode(!1);let D=R;const k=Array.from(v.childNodes);for(let M=0;M<k.length;M+=1){const q=k[M],U=b(q);if(U<=D){N.appendChild(q),D-=U;continue}if(D>0){const[I,B]=x(q,D);I&&N.appendChild(I),B&&L.appendChild(B)}else L.appendChild(q);for(let I=M+1;I<k.length;I+=1)L.appendChild(k[I]);break}return[N.childNodes.length?N:null,L.childNodes.length?L:null]},F=()=>{l.childNodes.length&&u.push(l),l=document.createElement("div"),l.className="footnote-page",p=o};let P=0;for(;P<h.length;){let v=h[P];const R=b(v);if(R<=p||R===0){l.appendChild(v),p-=R,P+=1;continue}const[N,L]=x(v,p);if(N&&l.appendChild(N),F(),L)v=L;else{P+=1;continue}for(;v;){const D=b(v);if(D<=p||D===0){l.appendChild(v),p-=D,v=null,P+=1;break}const[k,M]=x(v,p);k&&l.appendChild(k),F(),v=M}}return l.childNodes.length&&u.push(l),u.length?u:[l]},g=n=>{let o=0;const c=document.createElement("div");c.className="footnote-pagination";const h=document.createElement("button");h.type="button",h.className="footnote-pagination-prev",h.setAttribute("aria-label","Pagina precedente"),h.textContent="\u2190";const u=document.createElement("button");u.type="button",u.className="footnote-pagination-next",u.setAttribute("aria-label","Pagina successiva"),u.textContent="\u2192";const l=document.createElement("span");l.className="footnote-pagination-indicator";const p=()=>{n.forEach((b,S)=>{b.hidden=S!==o}),h.disabled=o===0,u.disabled=o===n.length-1,l.textContent=`${o+1}/${n.length}`};return h.addEventListener("click",()=>{o>0&&(o-=1,p())}),u.addEventListener("click",()=>{o<n.length-1&&(o+=1,p())}),c.appendChild(h),c.appendChild(l),c.appendChild(u),p(),c},C=680,O=(n,o)=>{n.style.minWidth="240px",n.style.visibility="hidden",n.style.left="0px",n.style.top="0px",document.body.appendChild(n);const c=o.getBoundingClientRect(),h=document.documentElement.clientWidth,u=document.documentElement.clientHeight,l=8,p=n.getBoundingClientRect();let b=window.scrollY+c.bottom+l;c.bottom+p.height+l>u&&(b=window.scrollY+c.top-p.height-l,b<window.scrollY+l&&(b=window.scrollY+l));let S=window.scrollX+c.left+(c.width-p.width)/2;S=Math.max(window.scrollX+l,Math.min(S,window.scrollX+h-p.width-l)),n.style.left=`${S}px`,n.style.top=`${b}px`,n.style.visibility="visible",h<=C&&(n.style.right=`${S}px`)},W=(n,o)=>{const c=e(o);if(!c)return;const h=i(n,o);a();const{popup:u,overlay:l}=f(c,h);document.body.appendChild(l),t={anchor:n,popup:u,overlay:l},O(u,n),document.addEventListener("keydown",s),window.addEventListener("resize",r),window.addEventListener("scroll",r,!0),(u.querySelector("button")||u).focus({preventScroll:!0})},z=()=>{document.addEventListener("click",n=>{if(n.metaKey||n.ctrlKey||n.shiftKey||n.button===1)return;const o=n.target.closest('sup.fn a[href], a.footnote-ref[href], sup a[href^="#fn"]');if(!o)return;const c=A(o.getAttribute("href")||"");!c||!(document.querySelector(`p.footnote#${w(c)}`)||document.getElementById(c))||(n.preventDefault(),W(o,c))})},X=()=>{const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 24 24"),n.setAttribute("width","32"),n.setAttribute("height","32"),n.setAttribute("aria-hidden","true"),n.style.flex="0 0 auto",n.style.transition="transform .2s ease",n.classList.add("footnotes-chevron");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d","M6.23 8.97a1 1 0 0 1 1.41 0L12 13.34l4.36-4.37a1 1 0 1 1 1.41 1.42l-5.06 5.06a1 1 0 0 1-1.41 0L6.23 10.4a1 1 0 0 1 0-1.42z"),o.setAttribute("fill","currentColor"),n.appendChild(o),n},H=n=>{if(!n||n.__czFootnotesReady)return;let o=n.querySelector(":scope > [id]");(!o||!/^H[2-6]$/.test(o.tagName))&&(o=n.querySelector(":scope > h2, :scope > h3, :scope > h4, :scope > h5, :scope > h6"));const c=n.querySelector(":scope > .footnotes-content");if(!o||!c)return;if(o.setAttribute("role","button"),o.setAttribute("tabindex","0"),o.setAttribute("aria-expanded","false"),!o.querySelector(".footnotes-chevron")){const l=X(),p=document.createElement("span");for(p.className="footnotes-toggle-text";o.firstChild;)p.appendChild(o.firstChild);o.appendChild(l),o.appendChild(p),o.style.display="inline-flex",o.style.alignItems="center",o.style.gap=".5rem",l.style.transform="rotate(-90deg)"}c.hidden=!0;const h=l=>{const p=o.querySelector(".footnotes-chevron");o.setAttribute("aria-expanded",l?"true":"false"),c.hidden=!l,p&&(p.style.transform=l?"rotate(0deg)":"rotate(-90deg)")},u=l=>{l.preventDefault(),h(c.hidden)};o.addEventListener("click",u),o.addEventListener("keydown",l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),u(l))}),n.__czFootnotesReady=!0},$=(n=document)=>{E("div.footnotes",n).forEach(H)},G=()=>{$(),z()};document.readyState!=="loading"?G():document.addEventListener("DOMContentLoaded",G);const Y=new MutationObserver(n=>{for(const o of n)o.addedNodes&&o.addedNodes.forEach(c=>{!c||c.nodeType!==1||typeof c.querySelectorAll=="function"&&(c.matches&&c.matches("div.footnotes")?H(c):$(c))})});try{Y.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}})(),(function(){var E="cz-theme",y="cz-theme-override",w=document.documentElement,A=document.getElementById("theme-toggle");if(!A)return;function T(d){w.setAttribute("data-theme",d),A.setAttribute("aria-pressed",d==="dark")}function _(){var d=new Date;return d.setHours(23,59,59,999),d.getTime()}function m(){return Date.now()}function e(){try{var d=localStorage.getItem(y);if(!d)return null;var g=JSON.parse(d);return!g||(g.exp||0)<m()||g.theme!=="light"&&g.theme!=="dark"?(localStorage.removeItem(y),null):g.theme}catch{try{localStorage.removeItem(y)}catch{}return null}}function i(d){try{localStorage.setItem(y,JSON.stringify({theme:d,exp:_()}))}catch{}}function t(){try{localStorage.removeItem(E)}catch{}}function a(){var d=new Date().getHours();return d>=7&&d<18?"light":"dark"}t();var s=e()||a();T(s);var r=720,f;A.addEventListener("click",function(){if(!A.classList.contains("animating")){var d=w.getAttribute("data-theme")||a(),g=d==="dark"?"light":"dark",C=g==="dark"?"anim-to-dark":"anim-to-light";A.classList.add("animating",C),requestAnimationFrame(function(){T(g),i(g),clearTimeout(f),f=setTimeout(function(){A.classList.remove("animating","anim-to-dark","anim-to-light")},r)})}}),document.addEventListener("visibilitychange",function(){if(document.visibilityState==="visible"){var d=e();d||T(a())}})})(),(function(){function E(s){return s&&typeof s.querySelectorAll=="function"?s:document}function y(s,r){return E(r).querySelector(s)}function w(s,r){return Array.from(E(r).querySelectorAll(s))}const A=s=>s&&(s.tagName==="BUTTON"||s.getAttribute("role")==="button"),T=()=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 24 24"),s.setAttribute("width","48"),s.setAttribute("height","48"),s.setAttribute("aria-hidden","true"),s.style.flex="0 0 auto",s.style.transition="transform .2s ease",s.classList.add("collapsable-chevron");const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d","M6.23 8.97a1 1 0 0 1 1.41 0L12 13.34l4.36-4.37a1 1 0 1 1 1.41 1.42l-5.06 5.06a1 1 0 0 1-1.41 0L6.23 10.4a1 1 0 0 1 0-1.42z"),r.setAttribute("fill","currentColor"),s.appendChild(r),s},_=(s,r)=>{const f=y(".collapsable-toggle",s),d=y(".collapsable-content",s);if(!f||!d)return;const g=y(".collapsable-chevron",f),C=s.classList.contains("is-open");r!==C&&(s.classList.toggle("is-open",r),f.setAttribute("aria-expanded",r?"true":"false"),d.setAttribute("aria-hidden",r?"false":"true"),d.style.display=r?"":"none",g&&(g.style.transform=r?"rotate(0deg)":"rotate(-90deg)"))},m=s=>{A(s)||(s.setAttribute("role","button"),s.setAttribute("tabindex","0")),s.style.cursor="pointer"},e=(s,r="collapsable-content-")=>(s.id||(s.id=r+Math.random().toString(36).slice(2,9)),s.id),i=s=>{if(!s||s.__collapsableReady)return;const r=y(".collapsable-toggle",s),f=y(".collapsable-content",s);if(!r||!f)return;if(!y(".collapsable-chevron",r)){const C=T(),O=document.createElement("span");for(O.className="collapsable-toggle-text";r.firstChild;)O.appendChild(r.firstChild);r.appendChild(O),r.insertBefore(C,O),r.style.display="inline-flex",r.style.alignItems="center",r.style.gap=".5rem"}m(r),e(f),r.setAttribute("aria-controls",f.id);const d=(s.getAttribute("data-initial")||"").toLowerCase();_(s,d!=="closed");const g=C=>{C.preventDefault(),_(s,!s.classList.contains("is-open"))};r.addEventListener("click",g),r.addEventListener("keydown",C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),g(C))}),s.__collapsableReady=!0},t=s=>{w(".collapsable-section",s).forEach(i)};document.readyState!=="loading"?t():document.addEventListener("DOMContentLoaded",t);const a=new MutationObserver(s=>{for(const r of s)r.addedNodes&&r.addedNodes.forEach(f=>{!f||f.nodeType!==1||typeof f.querySelectorAll=="function"&&(f.matches&&f.matches(".collapsable-section")?i(f):t(f))})});try{a.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}})(),(function(){const E=document.getElementById("latest-articles");if(!E)return;function y(){const w=E.querySelector(".cz-carousel");if(!w)return;const A=w.querySelector(".cz-carousel-track"),T=Array.from(A.querySelectorAll(".article-card")),_=Array.from(w.querySelectorAll(".cz-carousel-dot")),m=window.matchMedia("(max-width: 587px)");let e=0;function i(){if(!m.matches){A.style.transform="none";return}A.style.transform="translateX("+-e*100+"%)"}function t(a){_.forEach((s,r)=>{s.classList.toggle("is-active",r===a),s.setAttribute("aria-selected",r===a?"true":"false")})}_.forEach(a=>{a.addEventListener("click",function(){e=Math.max(0,Math.min(T.length-1,parseInt(this.dataset.index||"0",10))),i(),t(e)})}),m.addEventListener("change",i),window.addEventListener("resize",i),i(),t(e)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y()})(),(function(){"use strict";function E(m,e){var i={};for(var t in m)Object.prototype.hasOwnProperty.call(m,t)&&e.indexOf(t)<0&&(i[t]=m[t]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(m);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(m,t[a])&&(i[t[a]]=m[t[a]]);return i}class y{constructor(e,i){this.ATT_FACTOR=4,this.GRAPH_X=2,this.AMPLITUDE_FACTOR=.6,this.ctrl=e,this.definition=i}globalAttFn(e){return Math.pow(this.ATT_FACTOR/(this.ATT_FACTOR+Math.pow(e,this.ATT_FACTOR)),this.ATT_FACTOR)}xPos(e){return this.ctrl.width*((e+this.GRAPH_X)/(this.GRAPH_X*2))}yPos(e){return this.AMPLITUDE_FACTOR*(this.globalAttFn(e)*(this.ctrl.heightMax*this.ctrl.amplitude)*(1/this.definition.attenuation)*Math.sin(this.ctrl.opt.frequency*e-this.ctrl.phase))}draw(){const{ctx:e}=this.ctrl;e.moveTo(0,0),e.beginPath();const t=(this.definition.color||this.ctrl.color).replace(/rgb\(/g,"").replace(/\)/g,"");e.strokeStyle=`rgba(${t},${this.definition.opacity})`,e.lineWidth=this.definition.lineWidth;for(let a=-this.GRAPH_X;a<=this.GRAPH_X;a+=this.ctrl.opt.pixelDepth)e.lineTo(this.xPos(a),this.ctrl.heightMax+this.yPos(a));e.stroke()}static getDefinition(){return[{attenuation:-2,lineWidth:1,opacity:.1},{attenuation:-6,lineWidth:1,opacity:.2},{attenuation:4,lineWidth:1,opacity:.4},{attenuation:2,lineWidth:1,opacity:.6},{attenuation:1,lineWidth:1.5,opacity:1}]}}class w{constructor(e,i){this.GRAPH_X=25,this.AMPLITUDE_FACTOR=.8,this.SPEED_FACTOR=1,this.DEAD_PX=2,this.ATT_FACTOR=4,this.DESPAWN_FACTOR=.02,this.DEFAULT_NOOFCURVES_RANGES=[2,5],this.DEFAULT_AMPLITUDE_RANGES=[.3,1],this.DEFAULT_OFFSET_RANGES=[-3,3],this.DEFAULT_WIDTH_RANGES=[1,3],this.DEFAULT_SPEED_RANGES=[.5,1],this.DEFAULT_DESPAWN_TIMEOUT_RANGES=[500,2e3],this.ctrl=e,this.definition=i,this.noOfCurves=0,this.spawnAt=0,this.prevMaxY=0,this.phases=[],this.offsets=[],this.speeds=[],this.finalAmplitudes=[],this.widths=[],this.amplitudes=[],this.despawnTimeouts=[],this.verses=[]}getRandomRange(e){return e[0]+Math.random()*(e[1]-e[0])}spawnSingle(e){var i,t,a,s,r,f,d,g,C,O;this.phases[e]=0,this.amplitudes[e]=0,this.despawnTimeouts[e]=this.getRandomRange((t=(i=this.ctrl.opt.ranges)===null||i===void 0?void 0:i.despawnTimeout)!==null&&t!==void 0?t:this.DEFAULT_DESPAWN_TIMEOUT_RANGES),this.offsets[e]=this.getRandomRange((s=(a=this.ctrl.opt.ranges)===null||a===void 0?void 0:a.offset)!==null&&s!==void 0?s:this.DEFAULT_OFFSET_RANGES),this.speeds[e]=this.getRandomRange((f=(r=this.ctrl.opt.ranges)===null||r===void 0?void 0:r.speed)!==null&&f!==void 0?f:this.DEFAULT_SPEED_RANGES),this.finalAmplitudes[e]=this.getRandomRange((g=(d=this.ctrl.opt.ranges)===null||d===void 0?void 0:d.amplitude)!==null&&g!==void 0?g:this.DEFAULT_AMPLITUDE_RANGES),this.widths[e]=this.getRandomRange((O=(C=this.ctrl.opt.ranges)===null||C===void 0?void 0:C.width)!==null&&O!==void 0?O:this.DEFAULT_WIDTH_RANGES),this.verses[e]=this.getRandomRange([-1,1])}getEmptyArray(e){return new Array(e)}spawn(){var e,i;this.spawnAt=Date.now(),this.noOfCurves=Math.floor(this.getRandomRange((i=(e=this.ctrl.opt.ranges)===null||e===void 0?void 0:e.noOfCurves)!==null&&i!==void 0?i:this.DEFAULT_NOOFCURVES_RANGES)),this.phases=this.getEmptyArray(this.noOfCurves),this.offsets=this.getEmptyArray(this.noOfCurves),this.speeds=this.getEmptyArray(this.noOfCurves),this.finalAmplitudes=this.getEmptyArray(this.noOfCurves),this.widths=this.getEmptyArray(this.noOfCurves),this.amplitudes=this.getEmptyArray(this.noOfCurves),this.despawnTimeouts=this.getEmptyArray(this.noOfCurves),this.verses=this.getEmptyArray(this.noOfCurves);for(let t=0;t<this.noOfCurves;t++)this.spawnSingle(t)}globalAttFn(e){return Math.pow(this.ATT_FACTOR/(this.ATT_FACTOR+Math.pow(e,2)),this.ATT_FACTOR)}sin(e,i){return Math.sin(e-i)}yRelativePos(e){let i=0;for(let t=0;t<this.noOfCurves;t++){let a=4*(-1+t/(this.noOfCurves-1)*2);a+=this.offsets[t];const s=1/this.widths[t],r=e*s-a;i+=Math.abs(this.amplitudes[t]*this.sin(this.verses[t]*r,this.phases[t])*this.globalAttFn(r))}return i/this.noOfCurves}yPos(e){return this.AMPLITUDE_FACTOR*this.ctrl.heightMax*this.ctrl.amplitude*this.yRelativePos(e)*this.globalAttFn(e/this.GRAPH_X*2)}xPos(e){return this.ctrl.width*((e+this.GRAPH_X)/(this.GRAPH_X*2))}drawSupportLine(){const{ctx:e}=this.ctrl,i=[0,this.ctrl.heightMax,this.ctrl.width,1],t=e.createLinearGradient.apply(e,i);t.addColorStop(0,"transparent"),t.addColorStop(.1,"rgba(255,255,255,.5)"),t.addColorStop(1-.1-.1,"rgba(255,255,255,.5)"),t.addColorStop(1,"transparent"),e.fillStyle=t,e.fillRect.apply(e,i)}draw(){const{ctx:e}=this.ctrl;if(e.globalAlpha=.7,e.globalCompositeOperation=this.ctrl.opt.globalCompositeOperation,this.spawnAt===0&&this.spawn(),this.definition.supportLine)return this.drawSupportLine();for(let t=0;t<this.noOfCurves;t++)this.spawnAt+this.despawnTimeouts[t]<=Date.now()?this.amplitudes[t]-=this.DESPAWN_FACTOR:this.amplitudes[t]+=this.DESPAWN_FACTOR,this.amplitudes[t]=Math.min(Math.max(this.amplitudes[t],0),this.finalAmplitudes[t]),this.phases[t]=(this.phases[t]+this.ctrl.speed*this.speeds[t]*this.SPEED_FACTOR)%(2*Math.PI);let i=-1/0;for(const t of[1,-1]){e.beginPath();for(let a=-this.GRAPH_X;a<=this.GRAPH_X;a+=this.ctrl.opt.pixelDepth){const s=this.xPos(a),r=this.yPos(a);e.lineTo(s,this.ctrl.heightMax-t*r),i=Math.max(i,r)}e.closePath(),e.fillStyle=`rgba(${this.definition.color}, 1)`,e.strokeStyle=`rgba(${this.definition.color}, 1)`,e.fill()}return i<this.DEAD_PX&&this.prevMaxY>i&&(this.spawnAt=0),this.prevMaxY=i,null}static getDefinition(){return[{color:"255,255,255",supportLine:!1},{color:"15, 82, 169"},{color:"173, 57, 76"},{color:"48, 220, 155"}]}}class A{constructor(e){var{container:i}=e,t=E(e,["container"]);this.phase=0,this.run=!1,this.curves=[];const a=window.getComputedStyle(i);this.opt=Object.assign({container:i,style:"ios",ratio:window.devicePixelRatio||1,speed:.2,amplitude:1,frequency:6,color:"#fff",cover:!1,width:parseInt(a.width.replace("px",""),10),height:parseInt(a.height.replace("px",""),10),autostart:!0,pixelDepth:.02,lerpSpeed:.1,globalCompositeOperation:"lighter"},t),this.speed=Number(this.opt.speed),this.amplitude=Number(this.opt.amplitude),this.width=Number(this.opt.ratio*this.opt.width),this.height=Number(this.opt.ratio*this.opt.height),this.heightMax=Number(this.height/2)-6,this.color=`rgb(${this.hex2rgb(this.opt.color)})`,this.interpolation={speed:this.speed,amplitude:this.amplitude},this.canvas=document.createElement("canvas");const s=this.canvas.getContext("2d");if(s===null)throw new Error("Unable to create 2D Context");this.ctx=s,this.canvas.width=this.width,this.canvas.height=this.height,this.opt.cover===!0?this.canvas.style.width=this.canvas.style.height="100%":(this.canvas.style.width=`${this.width/this.opt.ratio}px`,this.canvas.style.height=`${this.height/this.opt.ratio}px`),this.opt.style==="ios9"?this.curves=(this.opt.curveDefinition||w.getDefinition()).map(r=>new w(this,r)):this.curves=(this.opt.curveDefinition||y.getDefinition()).map(r=>new y(this,r)),this.opt.container.appendChild(this.canvas),this.opt.autostart&&this.start()}hex2rgb(e){const i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(i,(a,s,r,f)=>s+s+r+r+f+f);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?`${parseInt(t[1],16).toString()},${parseInt(t[2],16).toString()},${parseInt(t[3],16).toString()}`:null}intLerp(e,i,t){return e*(1-t)+i*t}lerp(e){const i=this.interpolation[e];return i!==null&&(this[e]=this.intLerp(this[e],i,this.opt.lerpSpeed),this[e]-i===0&&(this.interpolation[e]=null)),this[e]}clear(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="source-over"}draw(){this.curves.forEach(e=>e.draw())}startDrawCycle(){this.clear(),this.lerp("amplitude"),this.lerp("speed"),this.draw(),this.phase=(this.phase+Math.PI/2*this.speed)%(2*Math.PI),window.requestAnimationFrame?this.animationFrameId=window.requestAnimationFrame(this.startDrawCycle.bind(this)):this.timeoutId=setTimeout(this.startDrawCycle.bind(this),20)}start(){if(!this.canvas)throw new Error("This instance of SiriWave has been disposed, please create a new instance");this.phase=0,this.run||(this.run=!0,this.startDrawCycle())}stop(){this.phase=0,this.run=!1,this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId),this.timeoutId&&clearTimeout(this.timeoutId)}dispose(){this.stop(),this.canvas&&(this.canvas.remove(),this.canvas=null)}set(e,i){this.interpolation[e]=i}setSpeed(e){this.set("speed",e)}setAmplitude(e){this.set("amplitude",e)}}function T(m){var e=m.querySelector(".cz-bowl-btn"),i=m.querySelector(".cz-bowl-audio");if(!e||!i)return;var t=m.querySelector(".cz-bowl-wave");t||(t=document.createElement("div"),t.className="cz-bowl-wave",e.insertAdjacentElement("afterend",t));var a=null,s=null;function r(){a?a.start():a=new A({container:t,style:"ios9",cover:!0,autostart:!0,speed:.2,amplitude:24}),s&&(clearTimeout(s),s=null),t.style.display="block",m.classList.add("is-playing"),a.setAmplitude(1)}function f(){a&&(a.setAmplitude(0),s=setTimeout(function(){a&&(a.dispose(),a=null),t.style.display="none",m.classList.remove("is-playing")},0))}e.addEventListener("click",function(){try{i.currentTime=0}catch{}i.play().catch(function(){})}),i.addEventListener("play",r),i.addEventListener("playing",r),i.addEventListener("pause",f),i.addEventListener("ended",f),e.addEventListener("keydown",function(d){(d.key===" "||d.key==="Enter")&&(d.preventDefault(),e.click())})}function _(m){document.readyState!=="loading"?m():document.addEventListener("DOMContentLoaded",m)}_(function(){document.querySelectorAll(".cz-bowl").forEach(T)})})();
//# sourceMappingURL=script.min.js.map
