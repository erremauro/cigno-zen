(function(A){function g(b){var v=A.getElementById("search-bar");v.style.display==="none"||v.style.display===""?v.style.display="block":v.style.display="none",A.querySelectorAll(".menu-label").forEach(S=>S.classList.toggle("hidden"));var E=A.getElementById("menu-button");E.classList.toggle("rotated")}A.addEventListener("DOMContentLoaded",function(){var b=A.getElementById("site-menu-toggle");b.addEventListener("click",g)})})(document),(function(){function A(i,e){return(e||document).querySelector(i)}function g(i,e){return Array.prototype.slice.call((e||document).querySelectorAll(i))}function b(i){var e=i.getAttribute("data-toggle-target")||"#"+(i.getAttribute("aria-controls")||"").trim();if(!e)return null;try{return document.querySelector(e)}catch{return null}}function v(i){var e=(i.getAttribute("data-scroll-target")||"").trim();if(!e)return null;try{return document.querySelector(e)}catch{return null}}function E(i,e){var a=i.querySelector(".more-link-button"),s=i.querySelector(".more-link-lable-top"),o=i.querySelector(".more-link-lable-bottom");i.setAttribute("aria-expanded",String(e)),a&&a.classList.toggle("rotated",e),s&&s.classList.toggle("hidden",e),o&&o.classList.toggle("hidden",!e);var d=b(i);d&&(e?d.removeAttribute("hidden"):d.setAttribute("hidden",""))}function S(i){if(!(!i||!("scrollIntoView"in i)))try{i.scrollIntoView({behavior:"smooth",block:"start"})}catch{i.scrollIntoView(!0)}}function p(i){i&&i.preventDefault();var e=i.currentTarget,a=e.getAttribute("aria-expanded")!=="true";E(e,a);var s=e.getAttribute("data-toggle-target")||"#"+(e.getAttribute("aria-controls")||"").trim();if(s&&g(".js-toggle").forEach(function(l){if(l!==e){var m=l.getAttribute("data-toggle-target")||"#"+(l.getAttribute("aria-controls")||"").trim();m===s&&E(l,a)}}),!a){var o=v(e);if(!o&&s){var d=g(".js-toggle").find(function(l){if(l===e)return!1;var m=l.getAttribute("data-toggle-target")||"#"+(l.getAttribute("aria-controls")||"").trim();return m===s&&l.hasAttribute("data-scroll-target")});d&&(o=v(d))}o&&S(o)}}function t(i){(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),p(i))}document.addEventListener("DOMContentLoaded",function(){g(".js-toggle").forEach(function(i){E(i,!1),i.addEventListener("click",p),i.addEventListener("keydown",t)})})})(),(()=>{const A=(n,r=document)=>Array.from(r.querySelectorAll(n)),g=(n,r=document)=>r.querySelector(n),b=n=>window.CSS&&CSS.escape?CSS.escape(n):(n||"").replace(/[^a-zA-Z0-9_\-]/g,"\\$&"),v=n=>{try{const r=n&&n.includes("#")?n.split("#").pop():"";return decodeURIComponent((r||"").trim())}catch{return""}},E=(n,r)=>{const c=f=>{if(!f||f.nodeType!==1)return!1;const h=(f.textContent||"").trim();if(!/^\[?\(?\d+\)?[\.\:\]]?$/.test(h))return!1;if(f.tagName==="A"){const C=(f.getAttribute("href")||"").trim(),L=f.className||"";if(C.includes("#")){const _=C.split("#").pop();if(_==="fnref"+r.replace(/^fn/,"")||/fnref|ref|note/i.test(_)||/fnref|ref|note/i.test(L))return!0}return!1}return["SUP","SPAN","EM","STRONG","B","I"].includes(f.tagName)};let u=3;for(;n.firstChild&&u-- >0;){if(c(n.firstChild)){n.removeChild(n.firstChild);continue}break}},S=n=>{A("a",n).forEach(r=>{const c=r.getAttribute("href")||"",u=r.className||"",f=r.getAttribute("role")||"",h=(r.getAttribute("aria-label")||r.getAttribute("title")||"").toLowerCase(),y=(r.textContent||"").replace(/[\uFE0E\uFE0F]/g,"").trim(),C=c.includes("#"),L=C?c.split("#").pop():"",_=/(^|\s)fnref(\s|$)/i.test(u)||/^fnref/i.test(L),D=/backlink|backref|return|footnote[-_]?return/i.test(u)||f.toLowerCase()==="doc-backlink"||h.includes("back")||h.includes("ritorna")||h.includes("torna")||/↩|↪|↑|⬆/.test(y);(C&&(_||D)||D)&&r.remove()})},p=n=>{if(!n)return"";let r=document.querySelector(`p.footnote#${b(n)}`);if(!r){const y=document.getElementById(n);y&&(r=y.matches("p.footnote")?y:y.querySelector("p.footnote, p"))}if(!r)return"";const c=r.cloneNode(!0);S(c);const u=c.innerHTML.trim(),f=r.cloneNode(!0);return E(f,n),S(f),((f.textContent||"").trim()?f.innerHTML.trim():u)||u},t=(n,r)=>{const c=f=>{const h=String(f||"").trim().match(/^\s*[\[\(]?(\d+)[\]\)\.:]?\s*$/);return h?h[1]:""};let u=c(n.textContent||n.innerText||"");if(!u&&n.closest("sup")&&(u=c(n.closest("sup").textContent||"")),!u){const f=(r||"").match(/(\d+)(?!.*\d)/);u=f?f[1]:n.textContent||r||""}return u};let i={anchor:null,popup:null,overlay:null};const e=()=>{var n,r,c,u;(n=i.popup)==null||n.remove(),(r=i.overlay)==null||r.remove(),(u=(c=i.anchor)==null?void 0:c.focus)==null||u.call(c,{preventScroll:!0}),i={anchor:null,popup:null,overlay:null},document.removeEventListener("keydown",a),window.removeEventListener("resize",s),window.removeEventListener("scroll",s,!0)},a=n=>{n.key==="Escape"&&e()},s=()=>{i.popup&&i.anchor&&l(i.popup,i.anchor)},o=(n,r)=>{const c=document.createElement("div");c.className="footnote-overlay",c.addEventListener("click",e,{passive:!0});const u=document.createElement("div");u.className="footnote-popup",u.setAttribute("role","dialog"),u.setAttribute("aria-modal","true");const f=`footnote-popup-title-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,7)}`;u.setAttribute("aria-labelledby",f);const h=document.createElement("button");h.className="footnote-popup-close",h.type="button",h.setAttribute("aria-label","Chiudi nota"),h.textContent="\xD7",h.addEventListener("click",e);const y=document.createElement("div");y.className="footnote-popup-title",y.id=f,y.textContent=`${r}`;const C=document.createElement("div");return C.className="footnote-popup-content",C.innerHTML=n,u.appendChild(h),u.appendChild(y),u.appendChild(C),{popup:u,overlay:c}},d=680,l=(n,r)=>{n.style.minWidth="240px",n.style.visibility="hidden",n.style.left="0px",n.style.top="0px",document.body.appendChild(n);const c=r.getBoundingClientRect(),u=document.documentElement.clientWidth,f=document.documentElement.clientHeight,h=8,y=n.getBoundingClientRect();let C=window.scrollY+c.bottom+h;c.bottom+y.height+h>f&&(C=window.scrollY+c.top-y.height-h,C<window.scrollY+h&&(C=window.scrollY+h));let L=window.scrollX+c.left+(c.width-y.width)/2;L=Math.max(window.scrollX+h,Math.min(L,window.scrollX+u-y.width-h)),n.style.left=`${L}px`,n.style.top=`${C}px`,n.style.visibility="visible",u<=d&&(n.style.right=`${L}px`)},m=(n,r)=>{const c=p(r);if(!c)return;const u=t(n,r);e();const{popup:f,overlay:h}=o(c,u);document.body.appendChild(h),i={anchor:n,popup:f,overlay:h},l(f,n),document.addEventListener("keydown",a),window.addEventListener("resize",s),window.addEventListener("scroll",s,!0),(f.querySelector("button")||f).focus({preventScroll:!0})},w=()=>{document.addEventListener("click",n=>{if(n.metaKey||n.ctrlKey||n.shiftKey||n.button===1)return;const r=n.target.closest('sup.fn a[href], a.footnote-ref[href], sup a[href^="#fn"]');if(!r)return;const c=v(r.getAttribute("href")||"");!c||!(document.querySelector(`p.footnote#${b(c)}`)||document.getElementById(c))||(n.preventDefault(),m(r,c))})},T=()=>{const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 24 24"),n.setAttribute("width","32"),n.setAttribute("height","32"),n.setAttribute("aria-hidden","true"),n.style.flex="0 0 auto",n.style.transition="transform .2s ease",n.classList.add("footnotes-chevron");const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d","M6.23 8.97a1 1 0 0 1 1.41 0L12 13.34l4.36-4.37a1 1 0 1 1 1.41 1.42l-5.06 5.06a1 1 0 0 1-1.41 0L6.23 10.4a1 1 0 0 1 0-1.42z"),r.setAttribute("fill","currentColor"),n.appendChild(r),n},O=n=>{if(!n||n.__czFootnotesReady)return;let r=n.querySelector(":scope > [id]");(!r||!/^H[2-6]$/.test(r.tagName))&&(r=n.querySelector(":scope > h2, :scope > h3, :scope > h4, :scope > h5, :scope > h6"));const c=n.querySelector(":scope > .footnotes-content");if(!r||!c)return;if(r.setAttribute("role","button"),r.setAttribute("tabindex","0"),r.setAttribute("aria-expanded","false"),!r.querySelector(".footnotes-chevron")){const h=T(),y=document.createElement("span");for(y.className="footnotes-toggle-text";r.firstChild;)y.appendChild(r.firstChild);r.appendChild(h),r.appendChild(y),r.style.display="inline-flex",r.style.alignItems="center",r.style.gap=".5rem",h.style.transform="rotate(-90deg)"}c.hidden=!0;const u=h=>{const y=r.querySelector(".footnotes-chevron");r.setAttribute("aria-expanded",h?"true":"false"),c.hidden=!h,y&&(y.style.transform=h?"rotate(0deg)":"rotate(-90deg)")},f=h=>{h.preventDefault(),u(c.hidden)};r.addEventListener("click",f),r.addEventListener("keydown",h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),f(h))}),n.__czFootnotesReady=!0},R=(n=document)=>{A("div.footnotes",n).forEach(O)},x=()=>{R(),w()};document.readyState!=="loading"?x():document.addEventListener("DOMContentLoaded",x);const k=new MutationObserver(n=>{for(const r of n)r.addedNodes&&r.addedNodes.forEach(c=>{!c||c.nodeType!==1||typeof c.querySelectorAll=="function"&&(c.matches&&c.matches("div.footnotes")?O(c):R(c))})});try{k.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}})(),(function(){var A="cz-theme",g="cz-theme-override",b=document.documentElement,v=document.getElementById("theme-toggle");if(!v)return;function E(l){b.setAttribute("data-theme",l),v.setAttribute("aria-pressed",l==="dark")}function S(){var l=new Date;return l.setHours(23,59,59,999),l.getTime()}function p(){return Date.now()}function t(){try{var l=localStorage.getItem(g);if(!l)return null;var m=JSON.parse(l);return!m||(m.exp||0)<p()||m.theme!=="light"&&m.theme!=="dark"?(localStorage.removeItem(g),null):m.theme}catch{try{localStorage.removeItem(g)}catch{}return null}}function i(l){try{localStorage.setItem(g,JSON.stringify({theme:l,exp:S()}))}catch{}}function e(){try{localStorage.removeItem(A)}catch{}}function a(){var l=new Date().getHours();return l>=7&&l<18?"light":"dark"}e();var s=t()||a();E(s);var o=720,d;v.addEventListener("click",function(){if(!v.classList.contains("animating")){var l=b.getAttribute("data-theme")||a(),m=l==="dark"?"light":"dark",w=m==="dark"?"anim-to-dark":"anim-to-light";v.classList.add("animating",w),requestAnimationFrame(function(){E(m),i(m),clearTimeout(d),d=setTimeout(function(){v.classList.remove("animating","anim-to-dark","anim-to-light")},o)})}}),document.addEventListener("visibilitychange",function(){if(document.visibilityState==="visible"){var l=t();l||E(a())}})})(),(function(){function A(s){return s&&typeof s.querySelectorAll=="function"?s:document}function g(s,o){return A(o).querySelector(s)}function b(s,o){return Array.from(A(o).querySelectorAll(s))}const v=s=>s&&(s.tagName==="BUTTON"||s.getAttribute("role")==="button"),E=()=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 24 24"),s.setAttribute("width","48"),s.setAttribute("height","48"),s.setAttribute("aria-hidden","true"),s.style.flex="0 0 auto",s.style.transition="transform .2s ease",s.classList.add("collapsable-chevron");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d","M6.23 8.97a1 1 0 0 1 1.41 0L12 13.34l4.36-4.37a1 1 0 1 1 1.41 1.42l-5.06 5.06a1 1 0 0 1-1.41 0L6.23 10.4a1 1 0 0 1 0-1.42z"),o.setAttribute("fill","currentColor"),s.appendChild(o),s},S=(s,o)=>{const d=g(".collapsable-toggle",s),l=g(".collapsable-content",s);if(!d||!l)return;const m=g(".collapsable-chevron",d),w=s.classList.contains("is-open");o!==w&&(s.classList.toggle("is-open",o),d.setAttribute("aria-expanded",o?"true":"false"),l.setAttribute("aria-hidden",o?"false":"true"),l.style.display=o?"":"none",m&&(m.style.transform=o?"rotate(0deg)":"rotate(-90deg)"))},p=s=>{v(s)||(s.setAttribute("role","button"),s.setAttribute("tabindex","0")),s.style.cursor="pointer"},t=(s,o="collapsable-content-")=>(s.id||(s.id=o+Math.random().toString(36).slice(2,9)),s.id),i=s=>{if(!s||s.__collapsableReady)return;const o=g(".collapsable-toggle",s),d=g(".collapsable-content",s);if(!o||!d)return;if(!g(".collapsable-chevron",o)){const w=E(),T=document.createElement("span");for(T.className="collapsable-toggle-text";o.firstChild;)T.appendChild(o.firstChild);o.appendChild(T),o.insertBefore(w,T),o.style.display="inline-flex",o.style.alignItems="center",o.style.gap=".5rem"}p(o),t(d),o.setAttribute("aria-controls",d.id);const l=(s.getAttribute("data-initial")||"").toLowerCase();S(s,l!=="closed");const m=w=>{w.preventDefault(),S(s,!s.classList.contains("is-open"))};o.addEventListener("click",m),o.addEventListener("keydown",w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),m(w))}),s.__collapsableReady=!0},e=s=>{b(".collapsable-section",s).forEach(i)};document.readyState!=="loading"?e():document.addEventListener("DOMContentLoaded",e);const a=new MutationObserver(s=>{for(const o of s)o.addedNodes&&o.addedNodes.forEach(d=>{!d||d.nodeType!==1||typeof d.querySelectorAll=="function"&&(d.matches&&d.matches(".collapsable-section")?i(d):e(d))})});try{a.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}})(),(function(){const A=document.getElementById("latest-articles");if(!A)return;function g(){const b=A.querySelector(".cz-carousel");if(!b)return;const v=b.querySelector(".cz-carousel-track"),E=Array.from(v.querySelectorAll(".article-card")),S=Array.from(b.querySelectorAll(".cz-carousel-dot")),p=window.matchMedia("(max-width: 587px)");let t=0;function i(){if(!p.matches){v.style.transform="none";return}v.style.transform="translateX("+-t*100+"%)"}function e(a){S.forEach((s,o)=>{s.classList.toggle("is-active",o===a),s.setAttribute("aria-selected",o===a?"true":"false")})}S.forEach(a=>{a.addEventListener("click",function(){t=Math.max(0,Math.min(E.length-1,parseInt(this.dataset.index||"0",10))),i(),e(t)})}),p.addEventListener("change",i),window.addEventListener("resize",i),i(),e(t)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g()})(),(function(){"use strict";function A(p,t){var i={};for(var e in p)Object.prototype.hasOwnProperty.call(p,e)&&t.indexOf(e)<0&&(i[e]=p[e]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,e=Object.getOwnPropertySymbols(p);a<e.length;a++)t.indexOf(e[a])<0&&Object.prototype.propertyIsEnumerable.call(p,e[a])&&(i[e[a]]=p[e[a]]);return i}class g{constructor(t,i){this.ATT_FACTOR=4,this.GRAPH_X=2,this.AMPLITUDE_FACTOR=.6,this.ctrl=t,this.definition=i}globalAttFn(t){return Math.pow(this.ATT_FACTOR/(this.ATT_FACTOR+Math.pow(t,this.ATT_FACTOR)),this.ATT_FACTOR)}xPos(t){return this.ctrl.width*((t+this.GRAPH_X)/(this.GRAPH_X*2))}yPos(t){return this.AMPLITUDE_FACTOR*(this.globalAttFn(t)*(this.ctrl.heightMax*this.ctrl.amplitude)*(1/this.definition.attenuation)*Math.sin(this.ctrl.opt.frequency*t-this.ctrl.phase))}draw(){const{ctx:t}=this.ctrl;t.moveTo(0,0),t.beginPath();const e=(this.definition.color||this.ctrl.color).replace(/rgb\(/g,"").replace(/\)/g,"");t.strokeStyle=`rgba(${e},${this.definition.opacity})`,t.lineWidth=this.definition.lineWidth;for(let a=-this.GRAPH_X;a<=this.GRAPH_X;a+=this.ctrl.opt.pixelDepth)t.lineTo(this.xPos(a),this.ctrl.heightMax+this.yPos(a));t.stroke()}static getDefinition(){return[{attenuation:-2,lineWidth:1,opacity:.1},{attenuation:-6,lineWidth:1,opacity:.2},{attenuation:4,lineWidth:1,opacity:.4},{attenuation:2,lineWidth:1,opacity:.6},{attenuation:1,lineWidth:1.5,opacity:1}]}}class b{constructor(t,i){this.GRAPH_X=25,this.AMPLITUDE_FACTOR=.8,this.SPEED_FACTOR=1,this.DEAD_PX=2,this.ATT_FACTOR=4,this.DESPAWN_FACTOR=.02,this.DEFAULT_NOOFCURVES_RANGES=[2,5],this.DEFAULT_AMPLITUDE_RANGES=[.3,1],this.DEFAULT_OFFSET_RANGES=[-3,3],this.DEFAULT_WIDTH_RANGES=[1,3],this.DEFAULT_SPEED_RANGES=[.5,1],this.DEFAULT_DESPAWN_TIMEOUT_RANGES=[500,2e3],this.ctrl=t,this.definition=i,this.noOfCurves=0,this.spawnAt=0,this.prevMaxY=0,this.phases=[],this.offsets=[],this.speeds=[],this.finalAmplitudes=[],this.widths=[],this.amplitudes=[],this.despawnTimeouts=[],this.verses=[]}getRandomRange(t){return t[0]+Math.random()*(t[1]-t[0])}spawnSingle(t){var i,e,a,s,o,d,l,m,w,T;this.phases[t]=0,this.amplitudes[t]=0,this.despawnTimeouts[t]=this.getRandomRange((e=(i=this.ctrl.opt.ranges)===null||i===void 0?void 0:i.despawnTimeout)!==null&&e!==void 0?e:this.DEFAULT_DESPAWN_TIMEOUT_RANGES),this.offsets[t]=this.getRandomRange((s=(a=this.ctrl.opt.ranges)===null||a===void 0?void 0:a.offset)!==null&&s!==void 0?s:this.DEFAULT_OFFSET_RANGES),this.speeds[t]=this.getRandomRange((d=(o=this.ctrl.opt.ranges)===null||o===void 0?void 0:o.speed)!==null&&d!==void 0?d:this.DEFAULT_SPEED_RANGES),this.finalAmplitudes[t]=this.getRandomRange((m=(l=this.ctrl.opt.ranges)===null||l===void 0?void 0:l.amplitude)!==null&&m!==void 0?m:this.DEFAULT_AMPLITUDE_RANGES),this.widths[t]=this.getRandomRange((T=(w=this.ctrl.opt.ranges)===null||w===void 0?void 0:w.width)!==null&&T!==void 0?T:this.DEFAULT_WIDTH_RANGES),this.verses[t]=this.getRandomRange([-1,1])}getEmptyArray(t){return new Array(t)}spawn(){var t,i;this.spawnAt=Date.now(),this.noOfCurves=Math.floor(this.getRandomRange((i=(t=this.ctrl.opt.ranges)===null||t===void 0?void 0:t.noOfCurves)!==null&&i!==void 0?i:this.DEFAULT_NOOFCURVES_RANGES)),this.phases=this.getEmptyArray(this.noOfCurves),this.offsets=this.getEmptyArray(this.noOfCurves),this.speeds=this.getEmptyArray(this.noOfCurves),this.finalAmplitudes=this.getEmptyArray(this.noOfCurves),this.widths=this.getEmptyArray(this.noOfCurves),this.amplitudes=this.getEmptyArray(this.noOfCurves),this.despawnTimeouts=this.getEmptyArray(this.noOfCurves),this.verses=this.getEmptyArray(this.noOfCurves);for(let e=0;e<this.noOfCurves;e++)this.spawnSingle(e)}globalAttFn(t){return Math.pow(this.ATT_FACTOR/(this.ATT_FACTOR+Math.pow(t,2)),this.ATT_FACTOR)}sin(t,i){return Math.sin(t-i)}yRelativePos(t){let i=0;for(let e=0;e<this.noOfCurves;e++){let a=4*(-1+e/(this.noOfCurves-1)*2);a+=this.offsets[e];const s=1/this.widths[e],o=t*s-a;i+=Math.abs(this.amplitudes[e]*this.sin(this.verses[e]*o,this.phases[e])*this.globalAttFn(o))}return i/this.noOfCurves}yPos(t){return this.AMPLITUDE_FACTOR*this.ctrl.heightMax*this.ctrl.amplitude*this.yRelativePos(t)*this.globalAttFn(t/this.GRAPH_X*2)}xPos(t){return this.ctrl.width*((t+this.GRAPH_X)/(this.GRAPH_X*2))}drawSupportLine(){const{ctx:t}=this.ctrl,i=[0,this.ctrl.heightMax,this.ctrl.width,1],e=t.createLinearGradient.apply(t,i);e.addColorStop(0,"transparent"),e.addColorStop(.1,"rgba(255,255,255,.5)"),e.addColorStop(1-.1-.1,"rgba(255,255,255,.5)"),e.addColorStop(1,"transparent"),t.fillStyle=e,t.fillRect.apply(t,i)}draw(){const{ctx:t}=this.ctrl;if(t.globalAlpha=.7,t.globalCompositeOperation=this.ctrl.opt.globalCompositeOperation,this.spawnAt===0&&this.spawn(),this.definition.supportLine)return this.drawSupportLine();for(let e=0;e<this.noOfCurves;e++)this.spawnAt+this.despawnTimeouts[e]<=Date.now()?this.amplitudes[e]-=this.DESPAWN_FACTOR:this.amplitudes[e]+=this.DESPAWN_FACTOR,this.amplitudes[e]=Math.min(Math.max(this.amplitudes[e],0),this.finalAmplitudes[e]),this.phases[e]=(this.phases[e]+this.ctrl.speed*this.speeds[e]*this.SPEED_FACTOR)%(2*Math.PI);let i=-1/0;for(const e of[1,-1]){t.beginPath();for(let a=-this.GRAPH_X;a<=this.GRAPH_X;a+=this.ctrl.opt.pixelDepth){const s=this.xPos(a),o=this.yPos(a);t.lineTo(s,this.ctrl.heightMax-e*o),i=Math.max(i,o)}t.closePath(),t.fillStyle=`rgba(${this.definition.color}, 1)`,t.strokeStyle=`rgba(${this.definition.color}, 1)`,t.fill()}return i<this.DEAD_PX&&this.prevMaxY>i&&(this.spawnAt=0),this.prevMaxY=i,null}static getDefinition(){return[{color:"255,255,255",supportLine:!1},{color:"15, 82, 169"},{color:"173, 57, 76"},{color:"48, 220, 155"}]}}class v{constructor(t){var{container:i}=t,e=A(t,["container"]);this.phase=0,this.run=!1,this.curves=[];const a=window.getComputedStyle(i);this.opt=Object.assign({container:i,style:"ios",ratio:window.devicePixelRatio||1,speed:.2,amplitude:1,frequency:6,color:"#fff",cover:!1,width:parseInt(a.width.replace("px",""),10),height:parseInt(a.height.replace("px",""),10),autostart:!0,pixelDepth:.02,lerpSpeed:.1,globalCompositeOperation:"lighter"},e),this.speed=Number(this.opt.speed),this.amplitude=Number(this.opt.amplitude),this.width=Number(this.opt.ratio*this.opt.width),this.height=Number(this.opt.ratio*this.opt.height),this.heightMax=Number(this.height/2)-6,this.color=`rgb(${this.hex2rgb(this.opt.color)})`,this.interpolation={speed:this.speed,amplitude:this.amplitude},this.canvas=document.createElement("canvas");const s=this.canvas.getContext("2d");if(s===null)throw new Error("Unable to create 2D Context");this.ctx=s,this.canvas.width=this.width,this.canvas.height=this.height,this.opt.cover===!0?this.canvas.style.width=this.canvas.style.height="100%":(this.canvas.style.width=`${this.width/this.opt.ratio}px`,this.canvas.style.height=`${this.height/this.opt.ratio}px`),this.opt.style==="ios9"?this.curves=(this.opt.curveDefinition||b.getDefinition()).map(o=>new b(this,o)):this.curves=(this.opt.curveDefinition||g.getDefinition()).map(o=>new g(this,o)),this.opt.container.appendChild(this.canvas),this.opt.autostart&&this.start()}hex2rgb(t){const i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(i,(a,s,o,d)=>s+s+o+o+d+d);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?`${parseInt(e[1],16).toString()},${parseInt(e[2],16).toString()},${parseInt(e[3],16).toString()}`:null}intLerp(t,i,e){return t*(1-e)+i*e}lerp(t){const i=this.interpolation[t];return i!==null&&(this[t]=this.intLerp(this[t],i,this.opt.lerpSpeed),this[t]-i===0&&(this.interpolation[t]=null)),this[t]}clear(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="source-over"}draw(){this.curves.forEach(t=>t.draw())}startDrawCycle(){this.clear(),this.lerp("amplitude"),this.lerp("speed"),this.draw(),this.phase=(this.phase+Math.PI/2*this.speed)%(2*Math.PI),window.requestAnimationFrame?this.animationFrameId=window.requestAnimationFrame(this.startDrawCycle.bind(this)):this.timeoutId=setTimeout(this.startDrawCycle.bind(this),20)}start(){if(!this.canvas)throw new Error("This instance of SiriWave has been disposed, please create a new instance");this.phase=0,this.run||(this.run=!0,this.startDrawCycle())}stop(){this.phase=0,this.run=!1,this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId),this.timeoutId&&clearTimeout(this.timeoutId)}dispose(){this.stop(),this.canvas&&(this.canvas.remove(),this.canvas=null)}set(t,i){this.interpolation[t]=i}setSpeed(t){this.set("speed",t)}setAmplitude(t){this.set("amplitude",t)}}function E(p){var t=p.querySelector(".cz-bowl-btn"),i=p.querySelector(".cz-bowl-audio");if(!t||!i)return;var e=p.querySelector(".cz-bowl-wave");e||(e=document.createElement("div"),e.className="cz-bowl-wave",t.insertAdjacentElement("afterend",e));var a=null,s=null;function o(){a?a.start():a=new v({container:e,style:"ios9",cover:!0,autostart:!0,speed:.2,amplitude:24}),s&&(clearTimeout(s),s=null),e.style.display="block",p.classList.add("is-playing"),a.setAmplitude(1)}function d(){a&&(a.setAmplitude(0),s=setTimeout(function(){a&&(a.dispose(),a=null),e.style.display="none",p.classList.remove("is-playing")},0))}t.addEventListener("click",function(){try{i.currentTime=0}catch{}i.play().catch(function(){})}),i.addEventListener("play",o),i.addEventListener("playing",o),i.addEventListener("pause",d),i.addEventListener("ended",d),t.addEventListener("keydown",function(l){(l.key===" "||l.key==="Enter")&&(l.preventDefault(),t.click())})}function S(p){document.readyState!=="loading"?p():document.addEventListener("DOMContentLoaded",p)}S(function(){document.querySelectorAll(".cz-bowl").forEach(E)})})();
//# sourceMappingURL=script.min.js.map
