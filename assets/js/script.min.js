(function(E){function d(v){var y=E.getElementById("search-bar");y.style.display==="none"||y.style.display===""?y.style.display="block":y.style.display="none",E.querySelectorAll(".menu-label").forEach(S=>S.classList.toggle("hidden"));var A=E.getElementById("menu-button");A.classList.toggle("rotated")}E.addEventListener("DOMContentLoaded",function(){var v=E.getElementById("site-menu-toggle");v.addEventListener("click",d)})})(document),(function(){function E(n,e){return(e||document).querySelector(n)}function d(n,e){return Array.prototype.slice.call((e||document).querySelectorAll(n))}function v(n){var e=n.getAttribute("data-toggle-target")||"#"+(n.getAttribute("aria-controls")||"").trim();if(!e)return null;try{return document.querySelector(e)}catch{return null}}function y(n){var e=(n.getAttribute("data-scroll-target")||"").trim();if(!e)return null;try{return document.querySelector(e)}catch{return null}}function A(n,e){var a=n.querySelector(".more-link-button"),s=n.querySelector(".more-link-lable-top"),r=n.querySelector(".more-link-lable-bottom");n.setAttribute("aria-expanded",String(e)),a&&a.classList.toggle("rotated",e),s&&s.classList.toggle("hidden",e),r&&r.classList.toggle("hidden",!e);var m=v(n);m&&(e?m.removeAttribute("hidden"):m.setAttribute("hidden",""))}function S(n){if(!(!n||!("scrollIntoView"in n)))try{n.scrollIntoView({behavior:"smooth",block:"start"})}catch{n.scrollIntoView(!0)}}function p(n){n&&n.preventDefault();var e=n.currentTarget,a=e.getAttribute("aria-expanded")!=="true";A(e,a);var s=e.getAttribute("data-toggle-target")||"#"+(e.getAttribute("aria-controls")||"").trim();if(s&&d(".js-toggle").forEach(function(u){if(u!==e){var b=u.getAttribute("data-toggle-target")||"#"+(u.getAttribute("aria-controls")||"").trim();b===s&&A(u,a)}}),!a){var r=y(e);if(!r&&s){var m=d(".js-toggle").find(function(u){if(u===e)return!1;var b=u.getAttribute("data-toggle-target")||"#"+(u.getAttribute("aria-controls")||"").trim();return b===s&&u.hasAttribute("data-scroll-target")});m&&(r=y(m))}r&&S(r)}}function t(n){(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),p(n))}document.addEventListener("DOMContentLoaded",function(){d(".js-toggle").forEach(function(n){A(n,!1),n.addEventListener("click",p),n.addEventListener("keydown",t)})})})(),(()=>{const E=(i,o=document)=>Array.from(o.querySelectorAll(i)),d=(i,o=document)=>o.querySelector(i),v=i=>window.CSS&&CSS.escape?CSS.escape(i):(i||"").replace(/[^a-zA-Z0-9_\-]/g,"\\$&"),y=i=>{try{const o=i&&i.includes("#")?i.split("#").pop():"";return decodeURIComponent((o||"").trim())}catch{return""}},S=(i,o)=>{const c=f=>{if(!f||f.nodeType!==1)return!1;const l=(f.textContent||"").trim();if(!/^\[?\(?\d+\)?[\.\:\]]?$/.test(l))return!1;if(f.tagName==="A"){const L=(f.getAttribute("href")||"").trim(),T=f.className||"";if(L.includes("#")){const x=L.split("#").pop();if(x==="fnref"+o.replace(/^fn/,"")||/fnref|ref|note/i.test(x)||/fnref|ref|note/i.test(T))return!0}return!1}return["SUP","SPAN","EM","STRONG","B","I"].includes(f.tagName)};let h=3;for(;i.firstChild&&h-- >0;){if(c(i.firstChild)){i.removeChild(i.firstChild);continue}break}},p=i=>{E("a",i).forEach(o=>{const c=o.getAttribute("href")||"",h=o.className||"",f=o.getAttribute("role")||"",l=(o.getAttribute("aria-label")||o.getAttribute("title")||"").toLowerCase(),g=(o.textContent||"").replace(/[\uFE0E\uFE0F]/g,"").trim(),L=c.includes("#"),T=L?c.split("#").pop():"",x=/(^|\s)fnref(\s|$)/i.test(h)||/^fnref/i.test(T),M=/backlink|backref|return|footnote[-_]?return/i.test(h)||f.toLowerCase()==="doc-backlink"||l.includes("back")||l.includes("ritorna")||l.includes("torna")||/↩|↪|↑|⬆/.test(g);(L&&(x||M)||M)&&o.remove()})},t=i=>{if(!i)return"";let o=document.querySelector(`p.footnote#${v(i)}`);if(!o){const g=document.getElementById(i);g&&(o=g.matches("p.footnote")?g:g.querySelector("p.footnote, p"))}if(!o)return"";const c=o.cloneNode(!0);p(c);const h=c.innerHTML.trim(),f=o.cloneNode(!0);return S(f,i),p(f),((f.textContent||"").trim()?f.innerHTML.trim():h)||h},n=(i,o)=>{const c=f=>{const l=String(f||"").trim().match(/^\s*[\[\(]?(\d+)[\]\)\.:]?\s*$/);return l?l[1]:""};let h=c(i.textContent||i.innerText||"");if(!h&&i.closest("sup")&&(h=c(i.closest("sup").textContent||"")),!h){const f=(o||"").match(/(\d+)(?!.*\d)/);h=f?f[1]:i.textContent||o||""}return h};let e={anchor:null,popup:null,overlay:null};const a=()=>{var i,o,c,h;(i=e.popup)==null||i.remove(),(o=e.overlay)==null||o.remove(),(h=(c=e.anchor)==null?void 0:c.focus)==null||h.call(c,{preventScroll:!0}),e={anchor:null,popup:null,overlay:null},document.removeEventListener("keydown",s),window.removeEventListener("resize",r),window.removeEventListener("scroll",r,!0)},s=i=>{i.key==="Escape"&&a()},r=()=>{e.popup&&e.anchor&&O(e.popup,e.anchor)},m=(i,o)=>{const c=document.createElement("div");c.className="footnote-overlay",c.addEventListener("click",a,{passive:!0});const h=document.createElement("div");h.className="footnote-popup",h.setAttribute("role","dialog"),h.setAttribute("aria-modal","true");const f=`footnote-popup-title-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,7)}`;h.setAttribute("aria-labelledby",f);const l=document.createElement("button");l.className="footnote-popup-close",l.type="button",l.setAttribute("aria-label","Chiudi nota"),l.textContent="\xD7",l.addEventListener("click",a);const g=document.createElement("div");g.className="footnote-popup-title",g.id=f,g.textContent=`${o}`;const L=document.createElement("div");L.className="footnote-popup-content";const T=u(i,256);let x=null;return T.length>1?(L.classList.add("footnote-popup-content--paged"),L.style.overflow="hidden",L.style.maxHeight="none",T.forEach((M,P)=>{P!==0&&(M.hidden=!0),L.appendChild(M)}),x=b(T)):L.innerHTML=i,h.appendChild(l),h.appendChild(g),h.appendChild(L),x&&h.appendChild(x),{popup:h,overlay:c}},u=(i,o)=>{const c=document.createElement("div");c.innerHTML=i||"";const h=Array.from(c.childNodes),f=[];let l=document.createElement("div");l.className="footnote-page";let g=o;const L=w=>(w.textContent||"").length,T=(w,R)=>{if(R<=0)return[null,w];const N=w.nodeValue||"";if(N.length<=R)return[w,null];let _=R;for(;_>0&&!/\s/.test(N.charAt(_-1));)_-=1;_===0&&(_=R);const k=document.createTextNode(N.slice(0,_)),D=N.slice(_).replace(/^\s+/,""),F=D?document.createTextNode(D):null;return[k,F]},x=(w,R)=>{if(R<=0)return[null,w];if(w.nodeType===3)return T(w,R);if(w.nodeType!==1)return[w,null];const N=w.cloneNode(!1),_=w.cloneNode(!1);let k=R;const D=Array.from(w.childNodes);for(let F=0;F<D.length;F+=1){const q=D[F],G=L(q);if(G<=k){N.appendChild(q),k-=G;continue}if(k>0){const[I,U]=x(q,k);I&&N.appendChild(I),U&&_.appendChild(U)}else _.appendChild(q);for(let I=F+1;I<D.length;I+=1)_.appendChild(D[I]);break}return[N.childNodes.length?N:null,_.childNodes.length?_:null]},M=()=>{l.childNodes.length&&f.push(l),l=document.createElement("div"),l.className="footnote-page",g=o};let P=0;for(;P<h.length;){let w=h[P];const R=L(w);if(R<=g||R===0){l.appendChild(w),g-=R,P+=1;continue}const[N,_]=x(w,g);if(N&&l.appendChild(N),M(),_)w=_;else{P+=1;continue}for(;w;){const k=L(w);if(k<=g||k===0){l.appendChild(w),g-=k,w=null,P+=1;break}const[D,F]=x(w,g);D&&l.appendChild(D),M(),w=F}}return l.childNodes.length&&f.push(l),f.length?f:[l]},b=i=>{let o=0;const c=document.createElement("div");c.className="footnote-pagination";const h=document.createElement("button");h.type="button",h.className="footnote-pagination-prev",h.setAttribute("aria-label","Pagina precedente"),h.textContent="\u2190";const f=document.createElement("button");f.type="button",f.className="footnote-pagination-next",f.setAttribute("aria-label","Pagina successiva"),f.textContent="\u2192";const l=document.createElement("span");l.className="footnote-pagination-indicator";const g=()=>{i.forEach((L,T)=>{L.hidden=T!==o}),h.disabled=o===0,f.disabled=o===i.length-1,l.textContent=`${o+1}/${i.length}`};return h.addEventListener("click",()=>{o>0&&(o-=1,g())}),f.addEventListener("click",()=>{o<i.length-1&&(o+=1,g())}),c.appendChild(h),c.appendChild(l),c.appendChild(f),g(),c},C=680,O=(i,o)=>{i.style.minWidth="240px",i.style.visibility="hidden",i.style.left="0px",i.style.top="0px",document.body.appendChild(i);const c=o.getBoundingClientRect(),h=document.documentElement.clientWidth,f=document.documentElement.clientHeight,l=8,g=i.getBoundingClientRect();let L=window.scrollY+c.bottom+l;c.bottom+g.height+l>f&&(L=window.scrollY+c.top-g.height-l,L<window.scrollY+l&&(L=window.scrollY+l));let T=window.scrollX+c.left+(c.width-g.width)/2;T=Math.max(window.scrollX+l,Math.min(T,window.scrollX+h-g.width-l)),i.style.left=`${T}px`,i.style.top=`${L}px`,i.style.visibility="visible",h<=C&&(i.style.right=`${T}px`)},W=(i,o)=>{const c=t(o);if(!c)return;const h=n(i,o);a();const{popup:f,overlay:l}=m(c,h);document.body.appendChild(l),e={anchor:i,popup:f,overlay:l},O(f,i),document.addEventListener("keydown",s),window.addEventListener("resize",r),window.addEventListener("scroll",r,!0),(f.querySelector("button")||f).focus({preventScroll:!0})},z=()=>{document.addEventListener("click",i=>{if(i.metaKey||i.ctrlKey||i.shiftKey||i.button===1)return;const o=i.target.closest('sup.fn a[href], a.footnote-ref[href], sup a[href^="#fn"]');if(!o)return;const c=y(o.getAttribute("href")||"");!c||!(document.querySelector(`p.footnote#${v(c)}`)||document.getElementById(c))||(i.preventDefault(),W(o,c))})},X=()=>{const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("viewBox","0 0 24 24"),i.setAttribute("width","32"),i.setAttribute("height","32"),i.setAttribute("aria-hidden","true"),i.style.flex="0 0 auto",i.style.transition="transform .2s ease",i.classList.add("footnotes-chevron");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d","M6.23 8.97a1 1 0 0 1 1.41 0L12 13.34l4.36-4.37a1 1 0 1 1 1.41 1.42l-5.06 5.06a1 1 0 0 1-1.41 0L6.23 10.4a1 1 0 0 1 0-1.42z"),o.setAttribute("fill","currentColor"),i.appendChild(o),i},H=i=>{if(!i||i.__czFootnotesReady)return;let o=i.querySelector(":scope > [id]");(!o||!/^H[2-6]$/.test(o.tagName))&&(o=i.querySelector(":scope > h2, :scope > h3, :scope > h4, :scope > h5, :scope > h6"));const c=i.querySelector(":scope > .footnotes-content");if(!o||!c)return;if(o.setAttribute("role","button"),o.setAttribute("tabindex","0"),o.setAttribute("aria-expanded","false"),!o.querySelector(".footnotes-chevron")){const l=X(),g=document.createElement("span");for(g.className="footnotes-toggle-text";o.firstChild;)g.appendChild(o.firstChild);o.appendChild(l),o.appendChild(g),o.style.display="inline-flex",o.style.alignItems="center",o.style.gap=".5rem",l.style.transform="rotate(-90deg)"}c.hidden=!0;const h=l=>{const g=o.querySelector(".footnotes-chevron");o.setAttribute("aria-expanded",l?"true":"false"),c.hidden=!l,g&&(g.style.transform=l?"rotate(0deg)":"rotate(-90deg)")},f=l=>{l.preventDefault(),h(c.hidden)};o.addEventListener("click",f),o.addEventListener("keydown",l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),f(l))}),i.__czFootnotesReady=!0},$=(i=document)=>{E("div.footnotes",i).forEach(H)},B=()=>{$(),z()};document.readyState!=="loading"?B():document.addEventListener("DOMContentLoaded",B);const Y=new MutationObserver(i=>{for(const o of i)o.addedNodes&&o.addedNodes.forEach(c=>{!c||c.nodeType!==1||typeof c.querySelectorAll=="function"&&(c.matches&&c.matches("div.footnotes")?H(c):$(c))})});try{Y.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}})(),(()=>{function E(){var d=document.querySelector(".nav-user");d&&(document.addEventListener("click",function(v){d.hasAttribute("open")&&(d.contains(v.target)||d.removeAttribute("open"))}),document.addEventListener("keydown",function(v){v.key==="Escape"&&d.hasAttribute("open")&&d.removeAttribute("open")}))}document.addEventListener("DOMContentLoaded",E)})(),(function(){var E="cz-theme",d="cz-theme-override",v=document.documentElement,y=document.getElementById("theme-toggle");if(!y)return;function A(u){v.setAttribute("data-theme",u),y.setAttribute("aria-pressed",u==="dark")}function S(){var u=new Date;return u.setHours(23,59,59,999),u.getTime()}function p(){return Date.now()}function t(){try{var u=localStorage.getItem(d);if(!u)return null;var b=JSON.parse(u);return!b||(b.exp||0)<p()||b.theme!=="light"&&b.theme!=="dark"?(localStorage.removeItem(d),null):b.theme}catch{try{localStorage.removeItem(d)}catch{}return null}}function n(u){try{localStorage.setItem(d,JSON.stringify({theme:u,exp:S()}))}catch{}}function e(){try{localStorage.removeItem(E)}catch{}}function a(){var u=new Date().getHours();return u>=7&&u<18?"light":"dark"}e();var s=t()||a();A(s);var r=720,m;y.addEventListener("click",function(){if(!y.classList.contains("animating")){var u=v.getAttribute("data-theme")||a(),b=u==="dark"?"light":"dark",C=b==="dark"?"anim-to-dark":"anim-to-light";y.classList.add("animating",C),requestAnimationFrame(function(){A(b),n(b),clearTimeout(m),m=setTimeout(function(){y.classList.remove("animating","anim-to-dark","anim-to-light")},r)})}}),document.addEventListener("visibilitychange",function(){if(document.visibilityState==="visible"){var u=t();u||A(a())}})})(),(function(){function E(s){return s&&typeof s.querySelectorAll=="function"?s:document}function d(s,r){return E(r).querySelector(s)}function v(s,r){return Array.from(E(r).querySelectorAll(s))}const y=s=>s&&(s.tagName==="BUTTON"||s.getAttribute("role")==="button"),A=()=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 24 24"),s.setAttribute("width","48"),s.setAttribute("height","48"),s.setAttribute("aria-hidden","true"),s.style.flex="0 0 auto",s.style.transition="transform .2s ease",s.classList.add("collapsable-chevron");const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d","M6.23 8.97a1 1 0 0 1 1.41 0L12 13.34l4.36-4.37a1 1 0 1 1 1.41 1.42l-5.06 5.06a1 1 0 0 1-1.41 0L6.23 10.4a1 1 0 0 1 0-1.42z"),r.setAttribute("fill","currentColor"),s.appendChild(r),s},S=(s,r)=>{const m=d(".collapsable-toggle",s),u=d(".collapsable-content",s);if(!m||!u)return;const b=d(".collapsable-chevron",m),C=s.classList.contains("is-open");r!==C&&(s.classList.toggle("is-open",r),m.setAttribute("aria-expanded",r?"true":"false"),u.setAttribute("aria-hidden",r?"false":"true"),u.style.display=r?"":"none",b&&(b.style.transform=r?"rotate(0deg)":"rotate(-90deg)"))},p=s=>{y(s)||(s.setAttribute("role","button"),s.setAttribute("tabindex","0")),s.style.cursor="pointer"},t=(s,r="collapsable-content-")=>(s.id||(s.id=r+Math.random().toString(36).slice(2,9)),s.id),n=s=>{if(!s||s.__collapsableReady)return;const r=d(".collapsable-toggle",s),m=d(".collapsable-content",s);if(!r||!m)return;if(!d(".collapsable-chevron",r)){const C=A(),O=document.createElement("span");for(O.className="collapsable-toggle-text";r.firstChild;)O.appendChild(r.firstChild);r.appendChild(O),r.insertBefore(C,O),r.style.display="inline-flex",r.style.alignItems="center",r.style.gap=".5rem"}p(r),t(m),r.setAttribute("aria-controls",m.id);const u=(s.getAttribute("data-initial")||"").toLowerCase();S(s,u!=="closed");const b=C=>{C.preventDefault(),S(s,!s.classList.contains("is-open"))};r.addEventListener("click",b),r.addEventListener("keydown",C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),b(C))}),s.__collapsableReady=!0},e=s=>{v(".collapsable-section",s).forEach(n)};document.readyState!=="loading"?e():document.addEventListener("DOMContentLoaded",e);const a=new MutationObserver(s=>{for(const r of s)r.addedNodes&&r.addedNodes.forEach(m=>{!m||m.nodeType!==1||typeof m.querySelectorAll=="function"&&(m.matches&&m.matches(".collapsable-section")?n(m):e(m))})});try{a.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}})(),(function(){const E=document.getElementById("latest-articles");if(!E)return;function d(){const v=E.querySelector(".cz-carousel");if(!v)return;const y=v.querySelector(".cz-carousel-track"),A=Array.from(y.querySelectorAll(".article-card")),S=Array.from(v.querySelectorAll(".cz-carousel-dot")),p=window.matchMedia("(max-width: 587px)");let t=0;function n(){if(!p.matches){y.style.transform="none";return}y.style.transform="translateX("+-t*100+"%)"}function e(a){S.forEach((s,r)=>{s.classList.toggle("is-active",r===a),s.setAttribute("aria-selected",r===a?"true":"false")})}S.forEach(a=>{a.addEventListener("click",function(){t=Math.max(0,Math.min(A.length-1,parseInt(this.dataset.index||"0",10))),n(),e(t)})}),p.addEventListener("change",n),window.addEventListener("resize",n),n(),e(t)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d()})(),(function(){"use strict";function E(p,t){var n={};for(var e in p)Object.prototype.hasOwnProperty.call(p,e)&&t.indexOf(e)<0&&(n[e]=p[e]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,e=Object.getOwnPropertySymbols(p);a<e.length;a++)t.indexOf(e[a])<0&&Object.prototype.propertyIsEnumerable.call(p,e[a])&&(n[e[a]]=p[e[a]]);return n}class d{constructor(t,n){this.ATT_FACTOR=4,this.GRAPH_X=2,this.AMPLITUDE_FACTOR=.6,this.ctrl=t,this.definition=n}globalAttFn(t){return Math.pow(this.ATT_FACTOR/(this.ATT_FACTOR+Math.pow(t,this.ATT_FACTOR)),this.ATT_FACTOR)}xPos(t){return this.ctrl.width*((t+this.GRAPH_X)/(this.GRAPH_X*2))}yPos(t){return this.AMPLITUDE_FACTOR*(this.globalAttFn(t)*(this.ctrl.heightMax*this.ctrl.amplitude)*(1/this.definition.attenuation)*Math.sin(this.ctrl.opt.frequency*t-this.ctrl.phase))}draw(){const{ctx:t}=this.ctrl;t.moveTo(0,0),t.beginPath();const e=(this.definition.color||this.ctrl.color).replace(/rgb\(/g,"").replace(/\)/g,"");t.strokeStyle=`rgba(${e},${this.definition.opacity})`,t.lineWidth=this.definition.lineWidth;for(let a=-this.GRAPH_X;a<=this.GRAPH_X;a+=this.ctrl.opt.pixelDepth)t.lineTo(this.xPos(a),this.ctrl.heightMax+this.yPos(a));t.stroke()}static getDefinition(){return[{attenuation:-2,lineWidth:1,opacity:.1},{attenuation:-6,lineWidth:1,opacity:.2},{attenuation:4,lineWidth:1,opacity:.4},{attenuation:2,lineWidth:1,opacity:.6},{attenuation:1,lineWidth:1.5,opacity:1}]}}class v{constructor(t,n){this.GRAPH_X=25,this.AMPLITUDE_FACTOR=.8,this.SPEED_FACTOR=1,this.DEAD_PX=2,this.ATT_FACTOR=4,this.DESPAWN_FACTOR=.02,this.DEFAULT_NOOFCURVES_RANGES=[2,5],this.DEFAULT_AMPLITUDE_RANGES=[.3,1],this.DEFAULT_OFFSET_RANGES=[-3,3],this.DEFAULT_WIDTH_RANGES=[1,3],this.DEFAULT_SPEED_RANGES=[.5,1],this.DEFAULT_DESPAWN_TIMEOUT_RANGES=[500,2e3],this.ctrl=t,this.definition=n,this.noOfCurves=0,this.spawnAt=0,this.prevMaxY=0,this.phases=[],this.offsets=[],this.speeds=[],this.finalAmplitudes=[],this.widths=[],this.amplitudes=[],this.despawnTimeouts=[],this.verses=[]}getRandomRange(t){return t[0]+Math.random()*(t[1]-t[0])}spawnSingle(t){var n,e,a,s,r,m,u,b,C,O;this.phases[t]=0,this.amplitudes[t]=0,this.despawnTimeouts[t]=this.getRandomRange((e=(n=this.ctrl.opt.ranges)===null||n===void 0?void 0:n.despawnTimeout)!==null&&e!==void 0?e:this.DEFAULT_DESPAWN_TIMEOUT_RANGES),this.offsets[t]=this.getRandomRange((s=(a=this.ctrl.opt.ranges)===null||a===void 0?void 0:a.offset)!==null&&s!==void 0?s:this.DEFAULT_OFFSET_RANGES),this.speeds[t]=this.getRandomRange((m=(r=this.ctrl.opt.ranges)===null||r===void 0?void 0:r.speed)!==null&&m!==void 0?m:this.DEFAULT_SPEED_RANGES),this.finalAmplitudes[t]=this.getRandomRange((b=(u=this.ctrl.opt.ranges)===null||u===void 0?void 0:u.amplitude)!==null&&b!==void 0?b:this.DEFAULT_AMPLITUDE_RANGES),this.widths[t]=this.getRandomRange((O=(C=this.ctrl.opt.ranges)===null||C===void 0?void 0:C.width)!==null&&O!==void 0?O:this.DEFAULT_WIDTH_RANGES),this.verses[t]=this.getRandomRange([-1,1])}getEmptyArray(t){return new Array(t)}spawn(){var t,n;this.spawnAt=Date.now(),this.noOfCurves=Math.floor(this.getRandomRange((n=(t=this.ctrl.opt.ranges)===null||t===void 0?void 0:t.noOfCurves)!==null&&n!==void 0?n:this.DEFAULT_NOOFCURVES_RANGES)),this.phases=this.getEmptyArray(this.noOfCurves),this.offsets=this.getEmptyArray(this.noOfCurves),this.speeds=this.getEmptyArray(this.noOfCurves),this.finalAmplitudes=this.getEmptyArray(this.noOfCurves),this.widths=this.getEmptyArray(this.noOfCurves),this.amplitudes=this.getEmptyArray(this.noOfCurves),this.despawnTimeouts=this.getEmptyArray(this.noOfCurves),this.verses=this.getEmptyArray(this.noOfCurves);for(let e=0;e<this.noOfCurves;e++)this.spawnSingle(e)}globalAttFn(t){return Math.pow(this.ATT_FACTOR/(this.ATT_FACTOR+Math.pow(t,2)),this.ATT_FACTOR)}sin(t,n){return Math.sin(t-n)}yRelativePos(t){let n=0;for(let e=0;e<this.noOfCurves;e++){let a=4*(-1+e/(this.noOfCurves-1)*2);a+=this.offsets[e];const s=1/this.widths[e],r=t*s-a;n+=Math.abs(this.amplitudes[e]*this.sin(this.verses[e]*r,this.phases[e])*this.globalAttFn(r))}return n/this.noOfCurves}yPos(t){return this.AMPLITUDE_FACTOR*this.ctrl.heightMax*this.ctrl.amplitude*this.yRelativePos(t)*this.globalAttFn(t/this.GRAPH_X*2)}xPos(t){return this.ctrl.width*((t+this.GRAPH_X)/(this.GRAPH_X*2))}drawSupportLine(){const{ctx:t}=this.ctrl,n=[0,this.ctrl.heightMax,this.ctrl.width,1],e=t.createLinearGradient.apply(t,n);e.addColorStop(0,"transparent"),e.addColorStop(.1,"rgba(255,255,255,.5)"),e.addColorStop(1-.1-.1,"rgba(255,255,255,.5)"),e.addColorStop(1,"transparent"),t.fillStyle=e,t.fillRect.apply(t,n)}draw(){const{ctx:t}=this.ctrl;if(t.globalAlpha=.7,t.globalCompositeOperation=this.ctrl.opt.globalCompositeOperation,this.spawnAt===0&&this.spawn(),this.definition.supportLine)return this.drawSupportLine();for(let e=0;e<this.noOfCurves;e++)this.spawnAt+this.despawnTimeouts[e]<=Date.now()?this.amplitudes[e]-=this.DESPAWN_FACTOR:this.amplitudes[e]+=this.DESPAWN_FACTOR,this.amplitudes[e]=Math.min(Math.max(this.amplitudes[e],0),this.finalAmplitudes[e]),this.phases[e]=(this.phases[e]+this.ctrl.speed*this.speeds[e]*this.SPEED_FACTOR)%(2*Math.PI);let n=-1/0;for(const e of[1,-1]){t.beginPath();for(let a=-this.GRAPH_X;a<=this.GRAPH_X;a+=this.ctrl.opt.pixelDepth){const s=this.xPos(a),r=this.yPos(a);t.lineTo(s,this.ctrl.heightMax-e*r),n=Math.max(n,r)}t.closePath(),t.fillStyle=`rgba(${this.definition.color}, 1)`,t.strokeStyle=`rgba(${this.definition.color}, 1)`,t.fill()}return n<this.DEAD_PX&&this.prevMaxY>n&&(this.spawnAt=0),this.prevMaxY=n,null}static getDefinition(){return[{color:"255,255,255",supportLine:!1},{color:"15, 82, 169"},{color:"173, 57, 76"},{color:"48, 220, 155"}]}}class y{constructor(t){var{container:n}=t,e=E(t,["container"]);this.phase=0,this.run=!1,this.curves=[];const a=window.getComputedStyle(n);this.opt=Object.assign({container:n,style:"ios",ratio:window.devicePixelRatio||1,speed:.2,amplitude:1,frequency:6,color:"#fff",cover:!1,width:parseInt(a.width.replace("px",""),10),height:parseInt(a.height.replace("px",""),10),autostart:!0,pixelDepth:.02,lerpSpeed:.1,globalCompositeOperation:"lighter"},e),this.speed=Number(this.opt.speed),this.amplitude=Number(this.opt.amplitude),this.width=Number(this.opt.ratio*this.opt.width),this.height=Number(this.opt.ratio*this.opt.height),this.heightMax=Number(this.height/2)-6,this.color=`rgb(${this.hex2rgb(this.opt.color)})`,this.interpolation={speed:this.speed,amplitude:this.amplitude},this.canvas=document.createElement("canvas");const s=this.canvas.getContext("2d");if(s===null)throw new Error("Unable to create 2D Context");this.ctx=s,this.canvas.width=this.width,this.canvas.height=this.height,this.opt.cover===!0?this.canvas.style.width=this.canvas.style.height="100%":(this.canvas.style.width=`${this.width/this.opt.ratio}px`,this.canvas.style.height=`${this.height/this.opt.ratio}px`),this.opt.style==="ios9"?this.curves=(this.opt.curveDefinition||v.getDefinition()).map(r=>new v(this,r)):this.curves=(this.opt.curveDefinition||d.getDefinition()).map(r=>new d(this,r)),this.opt.container.appendChild(this.canvas),this.opt.autostart&&this.start()}hex2rgb(t){const n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(n,(a,s,r,m)=>s+s+r+r+m+m);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?`${parseInt(e[1],16).toString()},${parseInt(e[2],16).toString()},${parseInt(e[3],16).toString()}`:null}intLerp(t,n,e){return t*(1-e)+n*e}lerp(t){const n=this.interpolation[t];return n!==null&&(this[t]=this.intLerp(this[t],n,this.opt.lerpSpeed),this[t]-n===0&&(this.interpolation[t]=null)),this[t]}clear(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="source-over"}draw(){this.curves.forEach(t=>t.draw())}startDrawCycle(){this.clear(),this.lerp("amplitude"),this.lerp("speed"),this.draw(),this.phase=(this.phase+Math.PI/2*this.speed)%(2*Math.PI),window.requestAnimationFrame?this.animationFrameId=window.requestAnimationFrame(this.startDrawCycle.bind(this)):this.timeoutId=setTimeout(this.startDrawCycle.bind(this),20)}start(){if(!this.canvas)throw new Error("This instance of SiriWave has been disposed, please create a new instance");this.phase=0,this.run||(this.run=!0,this.startDrawCycle())}stop(){this.phase=0,this.run=!1,this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId),this.timeoutId&&clearTimeout(this.timeoutId)}dispose(){this.stop(),this.canvas&&(this.canvas.remove(),this.canvas=null)}set(t,n){this.interpolation[t]=n}setSpeed(t){this.set("speed",t)}setAmplitude(t){this.set("amplitude",t)}}function A(p){var t=p.querySelector(".cz-bowl-btn"),n=p.querySelector(".cz-bowl-audio");if(!t||!n)return;var e=p.querySelector(".cz-bowl-wave");e||(e=document.createElement("div"),e.className="cz-bowl-wave",t.insertAdjacentElement("afterend",e));var a=null,s=null;function r(){a?a.start():a=new y({container:e,style:"ios9",cover:!0,autostart:!0,speed:.2,amplitude:24}),s&&(clearTimeout(s),s=null),e.style.display="block",p.classList.add("is-playing"),a.setAmplitude(1)}function m(){a&&(a.setAmplitude(0),s=setTimeout(function(){a&&(a.dispose(),a=null),e.style.display="none",p.classList.remove("is-playing")},0))}t.addEventListener("click",function(){try{n.currentTime=0}catch{}n.play().catch(function(){})}),n.addEventListener("play",r),n.addEventListener("playing",r),n.addEventListener("pause",m),n.addEventListener("ended",m),t.addEventListener("keydown",function(u){(u.key===" "||u.key==="Enter")&&(u.preventDefault(),t.click())})}function S(p){document.readyState!=="loading"?p():document.addEventListener("DOMContentLoaded",p)}S(function(){document.querySelectorAll(".cz-bowl").forEach(A)})})(),(function(){function E(d){document.readyState!=="loading"?d():document.addEventListener("DOMContentLoaded",d)}E(function(){var d=document.querySelector(".top-nav-bar .nav-toggle"),v=document.getElementById("nav-drawer"),y=document.querySelectorAll("[data-nav-drawer-close]"),A=document.querySelector(".top-nav-bar");if(!d||!v||!A)return;function S(){var t=A.getBoundingClientRect(),n=t.bottom||A.offsetHeight||72;document.documentElement.style.setProperty("--top-nav-height",n+"px")}function p(t){document.body.classList.toggle("nav-drawer-open",t),d.setAttribute("aria-expanded",t?"true":"false"),v.setAttribute("aria-hidden",t?"false":"true")}d.addEventListener("click",function(){var t=document.body.classList.contains("nav-drawer-open");p(!t)}),y.forEach(function(t){t.addEventListener("click",function(){p(!1)})}),document.addEventListener("keydown",function(t){t.key==="Escape"&&p(!1)}),S(),window.addEventListener("resize",S)})})(),(function(){function E(d){document.readyState!=="loading"?d():document.addEventListener("DOMContentLoaded",d)}E(function(){var d=document.querySelector(".top-nav-bar"),v=d?d.querySelector(".nav-search-toggle"):null,y=d?d.querySelector(".nav-search-close"):null,A=document.getElementById("top-nav-search"),S=A?A.querySelector(".search-field"):null,p=window.matchMedia("(max-width: 768px)");if(!d||!v||!y||!A)return;function t(n){if(!p.matches){d.classList.remove("is-search-open"),v.setAttribute("aria-expanded","false"),A.removeAttribute("aria-hidden");return}d.classList.toggle("is-search-open",n),v.setAttribute("aria-expanded",n?"true":"false"),A.setAttribute("aria-hidden",n?"false":"true"),n&&S&&S.focus({preventScroll:!0})}v.addEventListener("click",function(){t(!0)}),y.addEventListener("click",function(){t(!1)}),document.addEventListener("keydown",function(n){n.key==="Escape"&&d.classList.contains("is-search-open")&&t(!1)}),p.addEventListener?p.addEventListener("change",function(){t(!1)}):p.addListener&&p.addListener(function(){t(!1)}),t(!1)})})();
//# sourceMappingURL=script.min.js.map
